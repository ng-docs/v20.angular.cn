{
  "version": 3,
  "sources": ["src/app/features/references/constants/api-reference-prerender.constants.ts", "src/app/features/references/services/reference-scroll-handler.service.ts", "src/app/features/references/api-reference-details-page/api-reference-details-page.component.ts", "src/app/features/references/api-reference-details-page/api-reference-details-page.component.html"],
  "sourcesContent": ["/*!\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nexport const API_SECTION_CLASS_NAME = 'docs-reference-api-section';\nexport const MEMBER_ID_ATTRIBUTE = 'member-id';\n", "/*!\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {DOCUMENT, isPlatformBrowser} from '@angular/common';\nimport {DestroyRef, Injectable, PLATFORM_ID, inject} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {fromEvent} from 'rxjs';\nimport {MEMBER_ID_ATTRIBUTE} from '../constants/api-reference-prerender.constants';\nimport {Router} from '@angular/router';\n\n@Injectable()\nexport class ReferenceScrollHandler {\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly document = inject(DOCUMENT);\n  private readonly router = inject(Router);\n  private readonly isBrowser = isPlatformBrowser(inject(PLATFORM_ID));\n\n  setupListeners(tocClass: string): void {\n    if (!this.isBrowser) {\n      return;\n    }\n\n    this.setupCodeToCListeners(tocClass);\n  }\n\n  private setupCodeToCListeners(tocClass: string): void {\n    const tocContainer = this.document.querySelector<HTMLDivElement>(`.${tocClass}`);\n\n    if (!tocContainer) {\n      return;\n    }\n\n    fromEvent(tocContainer, 'click')\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe((event) => {\n        if (event.target instanceof HTMLAnchorElement) {\n          event.stopPropagation();\n          return;\n        }\n\n        // Get the card member ID from the attributes\n        const target =\n          event.target instanceof HTMLButtonElement\n            ? event.target\n            : this.findButtonElement(event.target as HTMLElement);\n        const memberId = this.getMemberId(target);\n\n        if (memberId) {\n          this.router.navigate([], {fragment: memberId, replaceUrl: true});\n        }\n      });\n  }\n\n  private getMemberId(lineButton: HTMLButtonElement | null): string | undefined {\n    if (!lineButton) {\n      return undefined;\n    }\n    return lineButton.attributes.getNamedItem(MEMBER_ID_ATTRIBUTE)?.value;\n  }\n\n  private findButtonElement(element: HTMLElement) {\n    let parent = element.parentElement;\n\n    while (parent) {\n      if (parent instanceof HTMLButtonElement) {\n        return parent;\n      }\n\n      parent = parent.parentElement;\n    }\n\n    return null;\n  }\n}\n", "/*!\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {ChangeDetectionStrategy, Component, effect, inject, input, Renderer2} from '@angular/core';\nimport {toSignal} from '@angular/core/rxjs-interop';\nimport {DocContent, DocViewer} from '@angular/docs';\nimport {ActivatedRoute} from '@angular/router';\nimport {DOCUMENT} from '@angular/common';\nimport {ReferenceScrollHandler} from '../services/reference-scroll-handler.service';\nimport {API_SECTION_CLASS_NAME} from '../constants/api-reference-prerender.constants';\n\nconst HIGHLIGHTED_CARD_CLASS = 'docs-highlighted-card';\n\n@Component({\n  selector: 'adev-reference-page',\n  imports: [DocViewer],\n  templateUrl: './api-reference-details-page.component.html',\n  styleUrls: ['./api-reference-details-page.component.scss'],\n  providers: [ReferenceScrollHandler],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport default class ApiReferenceDetailsPage {\n  private readonly referenceScrollHandler = inject(ReferenceScrollHandler);\n  private readonly route = inject(ActivatedRoute);\n  private readonly document = inject(DOCUMENT);\n  private readonly renderer = inject(Renderer2);\n\n  private highlightedElement: HTMLElement | null = null;\n\n  readonly docContent = input<DocContent | undefined>();\n  readonly urlFragment = toSignal(this.route.fragment);\n\n  constructor() {\n    effect(() => this.highlightCard());\n  }\n\n  onContentLoaded() {\n    this.referenceScrollHandler.setupListeners(API_SECTION_CLASS_NAME);\n    this.scrollToSectionLegacy();\n    this.highlightCard();\n  }\n\n  /** Handle legacy URLs with a `tab` query param from the old tab layout  */\n  private scrollToSectionLegacy() {\n    const params = this.route.snapshot.queryParams;\n    const tab = params['tab'] as string | undefined;\n\n    if (tab) {\n      const section = this.document.getElementById(tab);\n\n      if (section) {\n        // `scrollIntoView` is ignored even, if the element exists.\n        // It seems that it's related to: https://issues.chromium.org/issues/40715316\n        // Hence, the usage of `setTimeout`.\n        setTimeout(() => {\n          section.scrollIntoView({behavior: 'smooth'});\n        }, 100);\n      }\n    }\n  }\n\n  /** Highlight the member card that corresponds to the URL fragment.  */\n  private highlightCard() {\n    if (this.highlightedElement) {\n      this.renderer.removeClass(this.highlightedElement, HIGHLIGHTED_CARD_CLASS);\n      this.highlightedElement = null;\n    }\n\n    const fragment = this.urlFragment();\n\n    if (fragment) {\n      const element = this.document.getElementById(fragment);\n\n      if (element) {\n        this.renderer.addClass(element, HIGHLIGHTED_CARD_CLASS);\n      }\n      this.highlightedElement = element;\n    }\n  }\n}\n", "@if (docContent(); as docContent) {\n  <main docsViewer\n    [docContent]=\"docContent.contents\"\n    [hasToc]=\"true\"\n    (contentLoaded)=\"onContentLoaded()\"\n  ></main>\n}\n\n<div id=\"jump-msg\" class=\"cdk-visually-hidden\">跳转到详情</div>\n"],
  "mappings": "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",
  "names": []
}
