<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/common</span><div class="docs-reference-title"><div><h1>NgForOf</h1><div class="docs-api-item-label type-directive full">指令</div><div class="docs-api-item-label type-stable full"><span class="status-label">已弃用</span><span class="status-version">自 v20.0 起</span></div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/common/src/directives/ng_for_of.ts#L174-L340" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">代码</i></a></div><section class="docs-reference-description"><p>一个<a href="guide/directives/structural-directives">结构型指令</a>，它为集合中的每个条目渲染一个模板。
该指令放在一个元素上，该元素将成为克隆模板的父级。</p></section><nav class="docs-pill-row"><a class="docs-pill" href="guide/directives/structural-directives">结构型指令</a></nav></header><div class="docs-alert docs-alert-important"><p>弃用警告</p><div class="docs-deprecation-message"><span><p>请改用 <code>@for</code> 块。计划在 v22 中移除</p>
</span></div></div><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0">    <code>
      <span class="line shiki-deprecated"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgForOf">NgForOf</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgIterable">NgIterable</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgIterable">NgIterable</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/DoCheck">DoCheck</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><button aria-describedby="jump-msg" type="button" class="line " member-id="constructor"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_viewContainer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/ViewContainerRef">ViewContainerRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_template</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/TemplateRef">TemplateRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/common/NgForOfContext">NgForOfContext</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">_differs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/IterableDiffers">IterableDiffers</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgForOf">NgForOf</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></button><button aria-describedby="jump-msg" type="button" class="line shiki-deprecated" member-id="ngForOf"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngForOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> &amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgIterable">NgIterable</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="ngForTrackBy"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngForTrackBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/TrackByFunction">TrackByFunction</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></button><button aria-describedby="jump-msg" type="button" class="line shiki-deprecated" member-id="ngForTemplate"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Input">Input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngForTemplate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/TemplateRef">TemplateRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/common/NgForOfContext">NgForOfContext</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;);</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="ngTemplateContextGuard"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngTemplateContextGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgIterable">NgIterable</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgForOf">NgForOf</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/NgForOfContext">NgForOfContext</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">U</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></button><span class="line "><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
    </code>
    </pre></div></div><div class="docs-reference-members"><div class="docs-reference-members"><div id="constructor" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>constructor</h3><code><a href="/api/common/NgForOf">NgForOf</a>&lt;T, U&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">_viewContainer</span><code><a href="/api/core/ViewContainerRef">ViewContainerRef</a></code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">_template</span><code><a href="/api/core/TemplateRef">TemplateRef</a>&lt;<a href="/api/common/NgForOfContext">NgForOfContext</a>&lt;T, U&gt;&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">_differs</span><code><a href="/api/core/IterableDiffers">IterableDiffers</a></code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code><a href="/api/common/NgForOf">NgForOf</a>&lt;T, U&gt;</code></div></div></div></div><div id="ngForOf" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngForOf</h3><code>(U &amp; <a href="/api/core/NgIterable">NgIterable</a>&lt;T&gt;) | null | undefined</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p><code>ngFor</code> 指令已弃用。请改用 <code>@for</code> 块。</p>
</span></div><div><p>可迭代表达式的值，可以用作<a href="guide/directives/structural-directives#shorthand">模板输入变量</a>。</p></div></div></div></div><div id="ngForTrackBy" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngForTrackBy</h3><code><a href="/api/core/TrackByFunction">TrackByFunction</a>&lt;T&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p><code>ngFor</code> 指令已弃用。请改用 <code>@for</code> 块。</p>
</span></div><div><p>指定一个自定义的 <a href="/api/core/TrackByFunction"><code>TrackByFunction</code></a> 来计算可迭代对象中条目的标识。</p>
<p>如果未提供自定义的 <a href="/api/core/TrackByFunction"><code>TrackByFunction</code></a>，<a href="/api/common/NgForOf"><code>NgForOf</code></a> 将使用条目的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is" target="_blank">对象标识</a> 作为键。</p>
<p><a href="/api/common/NgForOf"><code>NgForOf</code></a> 使用计算出的键将可迭代对象中的条目与它为这些条目生成的 DOM 元素相关联。</p>
<p>当使用 <a href="/api/common/NgForOf"><code>NgForOf</code></a> 渲染的可迭代对象中的条目具有自然标识符（例如，自定义 ID 或主键）时，自定义 <a href="/api/core/TrackByFunction"><code>TrackByFunction</code></a> 可提供良好的用户体验，并且此可迭代对象可能使用仍代表相同底层实体的新对象实例进行更新（例如，当从服务器重新获取数据，并且可迭代对象被重新创建和重新渲染，但大部分数据仍然相同时）。</p></div></div></div></div><div id="ngForTrackBy" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngForTrackBy</h3><code><a href="/api/core/TrackByFunction">TrackByFunction</a>&lt;T&gt;</code></header><div class="docs-reference-card-body"></div></div><div id="ngForTemplate" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngForTemplate</h3><code><a href="/api/core/TemplateRef">TemplateRef</a>&lt;<a href="/api/common/NgForOfContext">NgForOfContext</a>&lt;T, U&gt;&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p><code>ngFor</code> 指令已弃用。请改用 <code>@for</code> 块。</p>
</span></div><div><p>对为可迭代对象中的每个条目印出的模板的引用。</p></div></div></div></div><div id="ngTemplateContextGuard" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>ngTemplateContextGuard</h3><code>ctx is <a href="/api/common/NgForOfContext">NgForOfContext</a>&lt;T, U&gt;</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>断言 <a href="/api/common/NgForOf"><code>NgForOf</code></a> 将要渲染的模板的上下文的正确类型。</p>
<p>此方法的存在是给 Ivy 模板类型检查编译器的信号，表明 <a href="/api/common/NgForOf"><code>NgForOf</code></a> 结构型指令使用特定的上下文类型来渲染其模板。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">dir</span><code><a href="/api/common/NgForOf">NgForOf</a>&lt;T, U&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">ctx</span><code>any</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>ctx is <a href="/api/common/NgForOfContext">NgForOfContext</a>&lt;T, U&gt;</code></div></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">描述</a></h2><div><p>一个<a href="guide/directives/structural-directives">结构型指令</a>，它为集合中的每个条目渲染一个模板。
该指令放在一个元素上，该元素将成为克隆模板的父级。</p>
<p><code>ngForOf</code> 指令通常以<a href="guide/directives/structural-directives#asterisk">简写形式</a> <code>*ngFor</code> 使用。
在这种形式下，为每次迭代渲染的模板是包含该指令的锚元素的内容。</p>
<p>以下范例显示了带有某些选项的简写语法，这些选项包含在 <code>&lt;li&gt;</code> 元素中。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *ngFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"let item of items; index as i; trackBy: trackByFn"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>简写形式会扩展为长形式，后者在 <code>&lt;ng-template&gt;</code> 元素上使用 <code>ngForOf</code> 选择器。
<code>&lt;ng-template&gt;</code> 元素的内容是包含简写形式指令的 <code>&lt;li&gt;</code> 元素。</p>
<p>这是简写形式范例的展开版本。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngFor</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> let-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [ngForOf]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"items"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> let-i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"index"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [ngForTrackBy]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"trackByFn"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;...&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>当 Angular 编译模板时，会自动展开简写语法。每个嵌入式视图的上下文会根据其词法位置逻辑合并到当前组件上下文中。</p>
<p>当使用简写语法时，Angular 只允许在<a href="guide/directives/structural-directives#one-per-element">一个元素上使用一个结构型指令</a>。例如，如果你想有条件地进行迭代，请将 <code>*ngIf</code> 放在包裹 <code>*ngFor</code> 元素的容器元素上。更多讨论，参见<a href="guide/directives/structural-directives#one-per-element">结构型指令</a>。</p></div><hr><h2>导出者</h2><ul><li><code><a href="/api/common/CommonModule">CommonModule</a></code></li></ul></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">用法说明</a></h2><div>
  <h3 id="local-variables">
    <a href="#local-variables" class="docs-anchor" tabindex="-1" aria-label="Link to Local variables">局部变量</a>
  </h3>
  <p><a href="/api/common/NgForOf"><code>NgForOf</code></a> 提供可被别名为局部变量的导出值。
例如：</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *ngFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"let user of users; index as i; first as isFirst"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">   {{i}}/{{users.length}}. {{user}} &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *ngIf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"isFirst"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;default&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>以下导出的值可以别名为局部变量：</p>

  <ul class="docs-list">
    <li><code>$implicit: T</code>：可迭代对象 (<code>ngForOf</code>) 中各个条目的值。</li>
<li><code>ngForOf: NgIterable&lt;T&gt;</code>：可迭代表达式的值。当表达式比属性访问更复杂时很有用，例如当使用 async 管道 (<code>userStreams | async</code>) 时。</li>
<li><code>index: number</code>：可迭代对象中当前条目的索引。</li>
<li><code>count: number</code>：可迭代对象的长度。</li>
<li><code>first: boolean</code>：当条目是可迭代对象中的第一个条目时为 True。</li>
<li><code>last: boolean</code>：当条目是可迭代对象中的最后一个条目时为 True。</li>
<li><code>even: boolean</code>：当条目在可迭代对象中具有偶数索引时为 True。</li>
<li><code>odd: boolean</code>：当条目在可迭代对象中具有奇数索引时为 True。</li>

  </ul>
  
  <h3 id="change-propagation">
    <a href="#change-propagation" class="docs-anchor" tabindex="-1" aria-label="Link to Change propagation">变更传播</a>
  </h3>
  <p>当迭代器的内容发生变化时，<a href="/api/common/NgForOf"><code>NgForOf</code></a> 会对 DOM 进行相应的更改：</p>

  <ul class="docs-list">
    <li>当添加条目时，模板的新实例会添加到 DOM 中。</li>
<li>当移除条目时，其模板实例会从 DOM 中移除。</li>
<li>当条目重新排序时，它们各自的模板也会在 DOM 中重新排序。</li>

  </ul>
  <p>Angular 使用对象标识来跟踪迭代器中的插入和删除，并在 DOM 中重现这些更改。这对动画和任何存在的有状态控件（例如接受用户输入的 <code>&lt;input&gt;</code> 元素）具有重要意义。插入的行可以动画进入，删除的行可以动画退出，未更改的行会保留任何未保存的状态，例如用户输入。有关动画的更多信息，请参见<a href="guide/animations/transition-and-triggers">过渡和触发器</a>。</p>
<p>迭代器中元素的标识可能会更改，而数据不会更改。例如，如果迭代器是通过到服务器的 RPC 生成的，并且该 RPC 重新运行，则可能会发生这种情况。即使数据没有更改，第二个响应也会生成具有不同标识的对象，并且 Angular 必须拆除整个 DOM 并重建它（就像所有旧元素都被删除，所有新元素都被插入一样）。</p>
<p>为了避免这种昂贵的操作，你可以通过为 <a href="/api/common/NgForOf"><code>NgForOf</code></a> 提供 <code>trackBy</code> 选项来定制默认的跟踪算法。
<code>trackBy</code> 接受一个函数，该函数有两个参数：<code>index</code> 和 <code>item</code>。
如果提供了 <code>trackBy</code>，Angular 将通过该函数的返回值来跟踪变更。</p>
</div></div></div>