<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/upgrade/static</span><div class="docs-reference-title"><div><h1>downgradeModule</h1><div class="docs-api-item-label type-function full">函数</div><div class="docs-api-item-label type-stable full">deprecated</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/upgrade/static/src/downgrade_module.ts#L139-L141" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">代码</i></a></div><section class="docs-reference-description"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p></section></header><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/Type">Type</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/NgModuleRef">NgModuleRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgModuleFactory">NgModuleFactory</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></div><div class="docs-reference-members"><div id="downgradeModule_0" class="docs-reference-member-card"><header class="docs-reference-card-header"><div class="docs-code"><pre class="shiki docs-mini-scroll-track shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> StaticProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 需要 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>、<a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个函数：</p>

  <ul class="docs-list">
    <li><a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>：如果你传递一个 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a> 来实例化一个模块。
注意：此类型的参数已被弃用。请提供一个 <a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个引导函数。</li>
<li><a href="/api/core/NgModule"><code>NgModule</code></a> 类：如果你传递一个 NgModule 类，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a> 来实例化一个模块。</li>
<li><code>Function</code>：如果你传递一个函数，它应该返回一个解析为 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 Promise。该函数会接收一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组作为参数，这些提供者应该可以从返回的 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 <a href="/api/core/Injector"><code>Injector</code></a> 中获得。</li>

  </ul>
  <p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 返回创建的 AngularJS 包装模块的名称。你可以使用它在主 AngularJS 模块中声明一个依赖项。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有关如何使用 <a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 的更多详细信息，请参阅
<a href="https://angular.io/guide/upgrade" target="_blank">性能升级</a>。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/Type">Type</a>&lt;T&gt; | ((extraProviders: <a href="/api/core/StaticProvider">StaticProvider</a>[]) =&gt; Promise&lt;<a href="/api/core/NgModuleRef">NgModuleRef</a>&lt;T&gt;&gt;)</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="downgradeModule_1" class="docs-reference-member-card"><header class="docs-reference-card-header"><div class="docs-code"><pre class="shiki docs-mini-scroll-track shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> NgModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 需要 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>、<a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个函数：</p>

  <ul class="docs-list">
    <li><a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>：如果你传递一个 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a> 来实例化一个模块。
注意：此类型的参数已被弃用。请提供一个 <a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个引导函数。</li>
<li><a href="/api/core/NgModule"><code>NgModule</code></a> 类：如果你传递一个 NgModule 类，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a> 来实例化一个模块。</li>
<li><code>Function</code>：如果你传递一个函数，它应该返回一个解析为 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 Promise。该函数会接收一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组作为参数，这些提供者应该可以从返回的 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 <a href="/api/core/Injector"><code>Injector</code></a> 中获得。</li>

  </ul>
  <p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 返回创建的 AngularJS 包装模块的名称。你可以使用它在主 AngularJS 模块中声明一个依赖项。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有关如何使用 <a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 的更多详细信息，请参阅
<a href="https://angular.io/guide/upgrade" target="_blank">性能升级</a>。</p></div><div><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p>传递 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a> 作为 <a href="/api/upgrade/static/downgradeModule"><code>downgradeModule</code></a> 函数参数已被弃用，
请改传 NgModule 类引用。</p>
</span></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a>&lt;T&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">说明</a></h2><div><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 需要 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>、<a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个函数：</p>

  <ul class="docs-list">
    <li><a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>：如果你传递一个 <a href="/api/core/NgModuleFactory"><code>NgModuleFactory</code></a>，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a> 来实例化一个模块。
注意：此类型的参数已被弃用。请提供一个 <a href="/api/core/NgModule"><code>NgModule</code></a> 类或一个引导函数。</li>
<li><a href="/api/core/NgModule"><code>NgModule</code></a> 类：如果你传递一个 NgModule 类，它将用于使用 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a> 来实例化一个模块。</li>
<li><code>Function</code>：如果你传递一个函数，它应该返回一个解析为 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 Promise。该函数会接收一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组作为参数，这些提供者应该可以从返回的 <a href="/api/core/NgModuleRef"><code>NgModuleRef</code></a> 的 <a href="/api/core/Injector"><code>Injector</code></a> 中获得。</li>

  </ul>
  <p><a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 返回创建的 AngularJS 包装模块的名称。你可以使用它在主 AngularJS 模块中声明一个依赖项。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {BrowserModule, platformBrowser} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/platform-browser'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {<a href="/api/upgrade/static/downgradeComponent">downgradeComponent</a>, downgradeModule, UpgradeComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/upgrade/static'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// The function that will bootstrap the Angular module (when/if necessary).</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// (This would be omitted if we provided an `NgModuleFactory` directly.)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ng2BootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/platform-browser/platformBrowser">platformBrowser</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(MyLazyAngularModule);</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This AngularJS module represents the AngularJS pieces of the application.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> myMainAngularJsModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'myMainAngularJsModule'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // We declare a dependency on the "downgraded" Angular module.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ng2BootstrapFn),</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // or</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // <a href="/api/upgrade/static/downgradeModule">downgradeModule</a>(MyLazyAngularModuleFactory)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span></code></pre>
  </div><p>有关如何使用 <a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 的更多详细信息，请参阅
<a href="https://angular.io/guide/upgrade" target="_blank">性能升级</a>。</p></div></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">用法说明</a></h2><div><p>除了 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a> 之外，你还可以像往常一样使用 <code>upgrade/static</code> 的其他辅助函数来构建混合应用。请注意，Angular 部分（例如降级的服务）在降级的模块被引导之前（即通过实例化降级的组件）将不可用。</p>
<div class="docs-alert docs-alert-important">

<p>你不能在同一个混合应用中使用 <a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 和 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a>。<br>
  请选择其中一个使用。</p>
</div>


  <h3 id="differences-with-upgrademodule">
    <a href="#differences-with-upgrademodule" class="docs-anchor" tabindex="-1" aria-label="Link to Differences with <code><a href=" api upgrade static upgrademodule_>UpgradeModule</a>"&gt;与 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 的区别
  </h3>
  <p>除了 API 不同之外，<a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 和 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a> 之间还有两个重要的内部差异会影响混合应用的行为：</p>

    <ol class="docs-ordered-list">
      <li>与 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a> 不同，<a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 不会在 <a href="/api/core/NgZone"><code>Angular zone</code></a> 内引导主 AngularJS 模块。</li>
<li>与 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a> 不同，<a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 在检测到应用 Angular 部分发生更改时，不会自动运行
<a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest" target="_blank">$digest()</a>。</li>

    </ol>
    <p>这意味着使用 <a href="/api/upgrade/static/UpgradeModule"><code>UpgradeModule</code></a> 的应用会更频繁地运行变更检测，以确保两个框架都能正确地获知可能的更改。
这不可避免地会导致比必要更多的变更检测运行。</p>
<p>另一方面，<a href="/api/upgrade/static/downgradeModule"><code>downgradeModule()</code></a> 不会试图将两个变更检测系统紧密地绑定在一起，而是将显式的变更检测运行限制在它知道有必要的情况下（例如，当降级组件的输入发生更改时）。这提高了性能，
尤其是在变更检测繁重的应用中，但需要开发者手动根据需要通知每个框架。</p>
<p>有关差异及其影响的更详细讨论，请参阅
<a href="https://angular.io/guide/upgrade" target="_blank">性能升级</a>。</p>
<div class="docs-alert docs-alert-helpful">

<p>你可以使用
  <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply" target="_blank">scope.$apply(...)</a> 或
  <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest" target="_blank">$rootScope.$digest()</a> 手动触发 AngularJS 中的变更检测运行。</p>
<p>你可以使用 <a href="/api/core/NgZone#run"><code>* ngZone.run(...)</code></a> 在 Angular 中手动触发变更检测运行。</p>
</div>


  <h3 id="downgrading-multiple-modules">
    <a href="#downgrading-multiple-modules" class="docs-anchor" tabindex="-1" aria-label="Link to Downgrading multiple modules">降级多个模块</a>
  </h3>
  <p>可以降级多个模块并将它们包含在 AngularJS 应用中。在这种情况下，当需要实例化关联的降级组件或可注入对象时，将引导每个降级模块。</p>
<p>降级多个模块时要记住的事项：</p>

  <ul class="docs-list">
    <li><p>每个降级的组件/可注入项都需要显式地与降级的模块关联。有关更多详细信息，请参阅 <a href="/api/upgrade/static/downgradeComponent"><code>downgradeComponent()</code></a> 和 <a href="/api/upgrade/static/downgradeInjectable"><code>downgradeInjectable()</code></a>。</p>
</li>
<li><p>如果你希望某些可注入项在所有降级的模块之间共享，可以在创建 <a href="/api/core/PlatformRef"><code>PlatformRef</code></a> 时将它们作为 <a href="/api/core/StaticProvider"><code>StaticProvider</code></a> 提供（例如通过 <a href="/api/platform-browser/platformBrowser"><code>platformBrowser</code></a> 或
<code>platformBrowserDynamic</code>）。</p>
</li>
<li><p>当使用 <a href="/api/core/PlatformRef#bootstrapmodule"><code><code>bootstrapModule()</code></code></a> 或 <a href="/api/core/PlatformRef#bootstrapmodulefactory"><code><code>bootstrapModuleFactory()</code></code></a> 引导降级模块时，每个模块都被视为“根”模块。因此，将为在 <code>"root"</code> 中提供的每个可注入对象创建一个新实例（通过 <a href="/api/core/Injectable#providedIn"><code>providedIn</code></a>）。如果这不是你的本意，你可以拥有一个共享模块（它将充当“根”模块），并使用该模块的注入器创建所有降级模块：</p>
</li>

  </ul>
  <div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rootInjectorPromise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Injector">Injector</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRootInjector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">rootInjectorPromise) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    rootInjectorPromise </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/platform-browser/platformBrowser">platformBrowser</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Ng2RootModule)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> moduleRef.injector);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rootInjectorPromise;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> downgradedNg2AModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rootInjector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRootInjector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> moduleAFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rootInjector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Compiler).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileModuleAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Ng2AModule);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> moduleAFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rootInjector);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> downgradedNg2BModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> rootInjector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getRootInjector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> moduleBFactory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> rootInjector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Compiler).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileModuleAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(Ng2BModule);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> moduleBFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(rootInjector);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> appModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> angular</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'exampleAppModule'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [downgradedNg2AModule, downgradedNg2BModule, downgradedNg2CModule])</span></span></code></pre>
  </div></div></div></div>