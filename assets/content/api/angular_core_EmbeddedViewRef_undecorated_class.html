<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/core</span><div class="docs-reference-title"><div><h1>EmbeddedViewRef</h1><div class="docs-api-item-label type-undecorated_class full">类</div><div class="docs-api-item-label type-stable full">stable</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/core/src/linker/view_ref.ts#L92-L102" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">代码</i></a></div><section class="docs-reference-description"><p>表示视图容器中的 Angular 视图。
嵌入式视图可以从除定义它的宿主组件之外的组件进行引用，或者可以由 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a> 独立定义。</p></section><nav class="docs-pill-row"><a class="docs-pill" href="/api/core/ViewContainerRef">ViewContainerRef</a></nav></header><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0">    <code>
      <span class="line "><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/EmbeddedViewRef">EmbeddedViewRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">C</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/ViewRef">ViewRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><button aria-describedby="jump-msg" type="button" class="line " member-id="context"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> C</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="rootNodes"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> rootNodes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[];</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="destroy"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> destroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="destroyed"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> destroyed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="onDestroy"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> onDestroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">callback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="markForCheck"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> markForCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="detach"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> detach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="detectChanges"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line shiki-deprecated" member-id="checkNoChanges"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> checkNoChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line " member-id="reattach"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> override</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> reattach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><span class="line "><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
    </code>
    </pre></div></div><div class="docs-reference-members"><div class="docs-reference-members"><div id="context" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>context</h3><code>C</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>此视图的上下文，继承自锚点元素。</p></div></div></div></div><div id="rootNodes" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>rootNodes</h3><code>any[]</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>此嵌入式视图的根节点。</p></div></div></div></div><div id="destroy" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>destroy</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>销毁此视图以及与之关联的所有数据结构。</p></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="destroyed" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>destroyed</h3><code>boolean</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item"><div><p>报告此视图是否已被销毁。</p></div></div></div></div><div id="onDestroy" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>onDestroy</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>一个生命周期钩子，为视图提供额外的开发者定义清理功能。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">callback</span><code>Function</code><div class="docs-parameter-description"><p>一个处理函数，用于清理与视图关联的开发者定义数据。当调用 <code>destroy()</code> 方法时调用。</p></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="markForCheck" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>markForCheck</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>当视图使用 <a href="/api/core/ChangeDetectionStrategy#OnPush"><code>ChangeDetectionStrategy#OnPush</code></a> (checkOnce) 变更检测策略时，显式地将该视图标记为已更改，以便可以再次检查它。</p>
<p>当输入属性（Inputs）发生更改或视图中触发事件时，组件通常被标记为脏（需要重新渲染）。调用此方法以确保即使这些触发器未发生，也检查组件。</p>
<!-- TODO: Add a link to a chapter on OnPush components --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="detach" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>detach</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>将此视图从变更检测树中分离。
分离的视图在重新附着之前不会被检查。
与 <code>detectChanges()</code> 结合使用以实现本地变更检测检查。</p>
<p>分离的视图在变更检测运行期间不会被检查，直到它们被重新附着，即使它们被标记为脏。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
<!-- TODO: Add a live demo once ref.detectChanges is merged into master --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="detectChanges" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>detectChanges</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>检查此视图及其子视图。与 <a href="/api/core/ChangeDetectorRef#detach"><code>ChangeDetectorRef#detach</code></a> 结合使用以实现本地变更检测检查。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
<!-- TODO: Add a live demo once ref.detectChanges is merged into master --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="checkNoChanges" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>checkNoChanges</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p>检查变更检测器及其子检测器，如果检测到任何更改，则抛出错误。</p>
<p>在开发模式下使用，以验证运行变更检测是否不会引入其他更改。在生产模式下调用它是一个空操作。</p></div><div><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p>这是一个仅用于测试的 API，在生产环境中没有位置。
当应用程序在开发模式下运行时，<code>checkNoChanges</code> 已是 <a href="/api/core/ApplicationRef"><code>ApplicationRef</code></a> tick 的一部分。
有关更精细的 <code>checkNoChanges</code> 验证，请使用 <code>ComponentFixture</code>。</p>
</span></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div><div id="reattach" class="docs-reference-member-card"><header class="docs-reference-card-header"><h3>reattach</h3><code>void</code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>将先前分离的视图重新附着到变更检测树。
默认情况下，视图会附着到树上。</p>
<!-- TODO: Add a link to a chapter on detach/reattach/local digest --></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>void</code></div></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">说明</a></h2><div><p>表示视图容器中的 Angular 视图。
嵌入式视图可以从除定义它的宿主组件之外的组件进行引用，或者可以由 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a> 独立定义。</p>
<p>视图中元素的 Property 可以更改，但视图中元素的结构（数量和顺序）不能更改。通过在视图容器中插入、移动或删除嵌套视图来更改元素的结构。</p></div></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">使用须知</a></h2><div><p>以下模板分解为两个独立的 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a> 实例，一个外部实例和一个内部实例。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Count: {{items.length}}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *ngFor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"let  item of items"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;{{item}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>这是外部 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a>：</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Count: {{items.length}}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngFor</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> let-item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [ngForOf]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"items"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>这是内部 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a>：</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;{{item}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>外部和内部 <a href="/api/core/TemplateRef"><code>TemplateRef</code></a> 实例按如下方式组装成视图：</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- <a href="/api/core/ViewRef">ViewRef</a>: outer-0 --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Count: 2</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> view-container-ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &lt;!-- <a href="/api/core/ViewRef">ViewRef</a>: inner-1 --&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;first&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- /<a href="/api/core/ViewRef">ViewRef</a>: inner-1 --&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  &lt;!-- <a href="/api/core/ViewRef">ViewRef</a>: inner-2 --&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;second&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- /<a href="/api/core/ViewRef">ViewRef</a>: inner-2 --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- /<a href="/api/core/ViewRef">ViewRef</a>: outer-0 --&gt;</span></span></code></pre>
  </div></div></div></div>