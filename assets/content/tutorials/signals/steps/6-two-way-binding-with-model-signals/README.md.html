<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">使用 model 信号的双向绑定</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/tutorials/signals/steps/6-two-way-binding-with-model-signals/README.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>既然您已经学习了<a href="/tutorials/signals/5-component-communication-with-signals">使用 input 信号将数据传递给组件</a>，那么让我们来探索 Angular 的 <code>model()</code> API 以实现双向绑定。Model 信号非常适合 UI 组件，例如复选框、滑块或自定义表单控件，这些组件既需要接收值，也需要更新值。</p>
<p>在此活动中，您将创建一个自定义复选框组件，该组件管理自己的状态，同时使父组件保持同步。</p>
<hr>


    <ol class="docs-steps">
      
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="set-up-the-custom-checkbox-with-model-signal">
    <a href="#set-up-the-custom-checkbox-with-model-signal" class="docs-anchor" tabindex="-1" aria-label="Link to Set up the custom checkbox with model signal">使用 model 信号设置自定义复选框</a>
  </h3>
  
      <p>在 <code>custom-checkbox</code> 组件中创建一个 model 信号，该信号可以接收并更新父组件的值。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Add imports for model signals</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {Component, model, input} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Model signal for two-way binding</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">checked </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> model.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Optional input for label</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">label </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span></code></pre>
  </div><p>与只读的 <code>input()</code> 信号不同，<code>model()</code> 信号既可以读取也可以写入。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="create-the-checkbox-template">
    <a href="#create-the-checkbox-template" class="docs-anchor" tabindex="-1" aria-label="Link to Create the checkbox template">创建复选框模板</a>
  </h3>
  
      <p>构建响应点击并更新自身 model 的复选框模板。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">label</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"custom-checkbox"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">input</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"checkbox"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    [checked]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"checked()"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    (change)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"toggle()"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"checkmark"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {{ label() }}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>该组件从其 model 信号读取数据，并有一个方法来更新它。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-the-toggle-method">
    <a href="#add-the-toggle-method" class="docs-anchor" tabindex="-1" aria-label="Link to Add the toggle method">添加切换方法</a>
  </h3>
  
      <p>实现切换方法，在复选框被点击时更新 model 信号。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toggle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // This updates BOTH the component's state AND the parent's model!</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.checked.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">checked</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>当子组件调用 <code>this.checked.set()</code> 时，它会自动将更改传播回父组件。这是与 <code>input()</code> 信号的关键区别。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="set-up-two-way-binding-in-the-parent">
    <a href="#set-up-two-way-binding-in-the-parent" class="docs-anchor" tabindex="-1" aria-label="Link to Set up two-way binding in the parent">在父组件中设置双向绑定</a>
  </h3>
  
      <p>首先，在 <code>app.ts</code> 中取消注释 model 信号属性和方法：</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Parent signal models</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">agreedToTerms </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">enableNotifications </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Methods to test two-way binding</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toggleTermsFromParent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.agreedToTerms.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">agreedToTerms</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">());</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">resetAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.agreedToTerms.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.enableNotifications.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>然后更新模板：</p>
<p>第一部分。<strong>取消注释复选框并添加双向绑定：</strong></p>

  <ul class="docs-list">
    <li>将第一个复选框的 <code>___ADD_TWO_WAY_BINDING___</code> 替换为 <code>[(checked)]="agreedToTerms"</code></li>
<li>将第二个复选框的 <code>___ADD_TWO_WAY_BINDING___</code> 替换为 <code>[(checked)]="enableNotifications"</code></li>

  </ul>
  <p>第二部分。<strong>将 <code>???</code> 占位符替换为 @if 块：</strong></p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@if (agreedToTerms()) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  Yes</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">} @else {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  No</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>第三部分。<strong>为按钮添加点击处理程序：</strong></p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> (click)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"toggleTermsFromParent()"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Toggle Terms from Parent&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> (click)</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"resetAll()"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;Reset All&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p><code>[(checked)]</code> 语法创建了双向绑定 - 数据向下流向组件，并且更改通过发出引用信号本身而不直接调用信号 getter 的事件向上流回父组件。</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="test-the-two-way-binding">
    <a href="#test-the-two-way-binding" class="docs-anchor" tabindex="-1" aria-label="Link to Test the two-way binding">测试双向绑定</a>
  </h3>
  
      <p>与您的应用进行交互，以查看双向绑定如何生效：</p>

    <ol class="docs-ordered-list">
      <li><strong>点击复选框</strong> - 组件更新其自身状态并通知父组件</li>
<li><strong>点击“从父组件切换条款”</strong> - 父组件的更新会向下传播到组件</li>
<li><strong>点击“全部重置”</strong> - 父组件重置两个 model，组件自动更新</li>

    </ol>
    <p>父组件和子组件都可以更新共享状态，并且两者都能自动保持同步！</p>

    </li>
    
    </ol>
    <p>太棒了！您已经学会了 model 信号如何实现双向绑定：</p>

  <ul class="docs-list">
    <li><strong>Model 信号</strong> - 对可以读取和写入的值使用 <code>model()</code> 和 <code>model.required()</code></li>
<li><strong>双向绑定</strong> - 使用 <code>[(property)]</code> 语法将父信号绑定到子 model</li>
<li><strong>非常适合 UI 组件</strong> - 需要管理自身状态的复选框、表单控件和小部件</li>
<li><strong>自动同步</strong> - 父组件和子组件无需手动事件处理即可保持同步</li>

  </ul>
  <p><strong>何时使用 <code>model()</code> 与 <code>input()</code>：</strong></p>

  <ul class="docs-list">
    <li>对仅向下流动的数据（显示数据、配置）使用 <code>input()</code></li>
<li>对需要更新自身值的 UI 组件（表单控件、切换控件）使用 <code>model()</code></li>

  </ul>
  <p>在下一课中，您将学习<a href="/tutorials/signals/7-using-signals-with-services">如何将信号与服务结合使用</a>！</p>
