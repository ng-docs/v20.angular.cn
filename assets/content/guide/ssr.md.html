
    <header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Server and hybrid rendering</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/ssr.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Angular ships all applications as client-side rendered (CSR) by default. While this approach delivers a initial payload that's lightweight, it introduces trade-offs including slower load times, degraded performance metrics, and higher resource demands since the user's device performs most of the computations. As a result, many applications achieve significant performance improvements by integrating server-side rendering (SSR) into a hybrid rendering strategy.</p>

  <h2 id="what-is-hybrid-rendering">
    <a href="#what-is-hybrid-rendering" class="docs-anchor" tabindex="-1" aria-label="Link to What is hybrid rendering?">What is hybrid rendering?</a>
  </h2>
  <p>Hybrid rendering allows developers to leverage the benefits of server-side rendering (SSR), pre-rendering (also known as "static site generation" or SSG) and client-side rendering (CSR) to optimize your Angular application. It gives you fine-grained control over how the different parts of your app are rendered to give your users the best experience possible.</p>

  <h2 id="setting-up-hybrid-rendering">
    <a href="#setting-up-hybrid-rendering" class="docs-anchor" tabindex="-1" aria-label="Link to Setting up hybrid rendering">Setting up hybrid rendering</a>
  </h2>
  <p>You can create a <strong>new</strong> project with hybrid rendering by using the server-side rendering flag (i.e., <code>--ssr</code>) with the Angular CLI <code>ng new</code> command:</p>
<div class="docs-code shell">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> --ssr</span></span></code></pre>
  </div><p>You can also enable hybrid rendering by adding server-side rendering to an existing project with the <code>ng add</code> command:</p>
<div class="docs-code shell">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @angular/ssr</span></span></code></pre>
  </div>
    <div class="docs-alert docs-alert-note">
    <p><strong>NOTE:</strong> By default, Angular prerenders your entire application and generates a server file. To disable this and create a fully static app, set <code>outputMode</code> to <code>static</code>. To enable SSR, update the server routes to use <a href="/api/ssr/RenderMode#Server"><code>RenderMode.Server</code></a>. For more details, see <a href="#server-routing"><code>Server routing</code></a> and <a href="#generate-a-fully-static-application"><code>Generate a fully static application</code></a>.</p>

    </div>
    
  <h2 id="server-routing">
    <a href="#server-routing" class="docs-anchor" tabindex="-1" aria-label="Link to Server routing">Server routing</a>
  </h2>
  
  <h3 id="configuring-server-routes">
    <a href="#configuring-server-routes" class="docs-anchor" tabindex="-1" aria-label="Link to Configuring server routes">Configuring server routes</a>
  </h3>
  <p>You can create a server route config by declaring an array of <a href="api/ssr/ServerRoute" title="API reference"><a href="/api/ssr/ServerRoute"><code>ServerRoute</code></a></a> objects. This configuration typically lives in a file named <code>app.routes.server.ts</code>.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// app.routes.server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/RenderMode">RenderMode</a>, ServerRoute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/ServerRoute">ServerRoute</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This renders the "/" route on the client (CSR)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Client,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'about'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This page is static, so we prerender it (SSG)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Prerender,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'profile'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This page requires user-specific data, so we use SSR</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Server,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'**'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// All other routes will be rendered on the server (SSR)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Server,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span></code></pre>
  </div><p>You can add this config to your application with <a href="api/ssr/provideServerRendering" title="API reference"><code>provideServerRendering</code></a> using the <a href="api/ssr/withRoutes" title="API reference"><a href="/api/ssr/withRoutes"><code>withRoutes</code></a></a> function:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { provideServerRendering, withRoutes } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { serverRoutes } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './app.routes.server'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// app.config.server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ApplicationConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    provideServerRendering</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/ssr/withRoutes">withRoutes</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(serverRoutes)),</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ... other providers ...</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>When using the <a href="ecosystem/service-workers/app-shell">App shell pattern</a>, you must specify the component to be used as the app shell for client-side rendered routes. To do this, use the <a href="api/ssr/withAppShell" title="API reference"><a href="/api/ssr/withAppShell"><code>withAppShell</code></a></a> feature:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { provideServerRendering, withRoutes, withAppShell } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { AppShellComponent } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './app-shell/app-shell.component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ApplicationConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    provideServerRendering</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      <a href="/api/ssr/withRoutes">withRoutes</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(serverRoutes),</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      <a href="/api/ssr/withAppShell">withAppShell</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AppShellComponent),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ),</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // ... other providers ...</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div>
  <h3 id="rendering-modes">
    <a href="#rendering-modes" class="docs-anchor" tabindex="-1" aria-label="Link to Rendering modes">Rendering modes</a>
  </h3>
  <p>The server routing configuration lets you specify how each route in your application should render by setting a <a href="api/ssr/RenderMode" title="API reference"><a href="/api/ssr/RenderMode"><code>RenderMode</code></a></a>:</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th>Rendering mode</th>
<th>Description</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td><strong>Server (SSR)</strong></td>
<td>Renders the application on the server for each request, sending a fully populated HTML page to the browser.</td>
</tr>
<tr>
<td><strong>Client (CSR)</strong></td>
<td>Renders the application in the browser. This is the default Angular behavior.</td>
</tr>
<tr>
<td><strong>Prerender (SSG)</strong></td>
<td>Prerenders the application at build time, generating static HTML files for each route.</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h4 id="choosing-a-rendering-mode">
    <a href="#choosing-a-rendering-mode" class="docs-anchor" tabindex="-1" aria-label="Link to Choosing a rendering mode">Choosing a rendering mode</a>
  </h4>
  <p>Each rendering mode has different benefits and drawbacks. You can choose rendering modes based on the specific needs of your application.</p>

  <h5 id="client-side-rendering-csr">
    <a href="#client-side-rendering-csr" class="docs-anchor" tabindex="-1" aria-label="Link to Client-side rendering (CSR)">Client-side rendering (CSR)</a>
  </h5>
  <p>Client-side rendering has the simplest development model, as you can write code that assumes it always runs in a web browser. This lets you use a wide range of client-side libraries that also assume they run in a browser.</p>
<p>Client-side rendering generally has worse performance than other rendering modes, as it must download, parse, and execute your page's JavaScript before the user can see any rendered content. If your page fetches more data from the server as it renders, users also have to wait for those additional requests before they can view the complete content.</p>
<p>If your page is indexed by search crawlers, client-side rendering may negatively affect search engine optimization (SEO), as search crawlers have limits to how much JavaScript they execute when indexing a page.</p>
<p>When client-side rendering, the server does not need to do any work to render a page beyond serving static JavaScript assets. You may consider this factor if server cost is a concern.</p>
<p>Applications that support installable, offline experiences with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API" target="_blank">service workers</a> can rely on client-side rendering without needing to communicate with a server.</p>

  <h5 id="server-side-rendering-ssr">
    <a href="#server-side-rendering-ssr" class="docs-anchor" tabindex="-1" aria-label="Link to Server-side rendering (SSR)">Server-side rendering (SSR)</a>
  </h5>
  <p>Server-side rendering offers faster page loads than client-side rendering. Instead of waiting for JavaScript to download and run, the server directly renders an HTML document upon receiving a request from the browser. The user experiences only the latency necessary for the server to fetch data and render the requested page. This mode also eliminates the need for additional network requests from the browser, as your code can fetch data during rendering on the server.</p>
<p>Server-side rendering generally has excellent search engine optimization (SEO), as search crawlers receive a fully rendered HTML document.</p>
<p>Server-side rendering requires you to author code that does not strictly depend on browser APIs and limits your selection of JavaScript libraries that assume they run in a browser.</p>
<p>When server-side rendering, your server runs Angular to produce an HTML response for every request which may increase server hosting costs.</p>

  <h5 id="build-time-prerendering">
    <a href="#build-time-prerendering" class="docs-anchor" tabindex="-1" aria-label="Link to Build-time prerendering">Build-time prerendering</a>
  </h5>
  <p>Prerendering offers faster page loads than both client-side rendering and server-side rendering. Because prerendering creates HTML documents at <em>build-time</em>, the server can directly respond to requests with the static HTML document without any additional work.</p>
<p>Prerendering requires that all information necessary to render a page is available at <em>build-time</em>. This means that prerendered pages cannot include any data to the specific user loading the page. Prerendering is primarily useful for pages that are the same for all users of your application.</p>
<p>Because prerendering occurs at build-time, it may add significant time to your production builds. Using <a href="api/ssr/ServerRoutePrerenderWithParams#getPrerenderParams" title="API reference"><code>getPrerenderParams</code></a> to produce a large number of HTML documents may affect the total file size of your deployments, and thus lead to slower deployments.</p>
<p>Prerendering generally has excellent search engine optimization (SEO), as search crawlers receive a fully rendered HTML document.</p>
<p>Prerendering requires you to author code that does not strictly depend on browser APIs and limits your selection of JavaScript libraries that assume they run in a browser.</p>
<p>Prerendering incurs extremely little overhead per server request, as your server responds with static HTML documents. Static files are also easily cached by Content Delivery Networks (CDNs), browsers, and intermediate caching layers for even faster subsequent page loads. Fully static sites can also be deployed solely through a CDN or static file server, eliminating the need to maintain a custom server runtime for your application. This enhances scalability by offloading work from an application web server, making it particularly beneficial for high-traffic applications.</p>

    <div class="docs-alert docs-alert-note">
    <p><strong>NOTE:</strong> When using Angular service worker, the first request is server-rendered, but all subsequent requests are handled by the service worker and rendered client-side.</p>

    </div>
    
  <h3 id="setting-headers-and-status-codes">
    <a href="#setting-headers-and-status-codes" class="docs-anchor" tabindex="-1" aria-label="Link to Setting headers and status codes">Setting headers and status codes</a>
  </h3>
  <p>You can set custom headers and status codes for individual server routes using the <code>headers</code> and <code>status</code> properties in the <a href="/api/ssr/ServerRoute"><code>ServerRoute</code></a> configuration.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// app.routes.server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/RenderMode">RenderMode</a>, ServerRoute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/ServerRoute">ServerRoute</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'profile'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Server,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    headers: {</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">      'X-My-Custom-Header'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'some-value'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    status: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">201</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ... other routes</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span></code></pre>
  </div>
  <h3 id="redirects">
    <a href="#redirects" class="docs-anchor" tabindex="-1" aria-label="Link to Redirects">Redirects</a>
  </h3>
  <p>Angular handles redirects specified by the <a href="api/router/Route#redirectTo" title="API reference"><code>redirectTo</code></a> property in route configurations, differently on the server-side.</p>
<p><strong>Server-Side Rendering (SSR)</strong>
Redirects are performed using standard HTTP redirects (e.g., 301, 302) within the server-side rendering process.</p>
<p><strong>Prerendering (SSG)</strong>
Redirects are implemented as "soft redirects" using <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta#refresh" target="_blank"><code>&lt;meta http-equiv=&quot;refresh&quot;&gt;</code></a> tags in the prerendered HTML.</p>

  <h3 id="customizing-build-time-prerendering-ssg">
    <a href="#customizing-build-time-prerendering-ssg" class="docs-anchor" tabindex="-1" aria-label="Link to Customizing build-time prerendering (SSG)">Customizing build-time prerendering (SSG)</a>
  </h3>
  <p>When using <a href="api/ssr/RenderMode#Prerender" title="API reference"><a href="/api/ssr/RenderMode#Prerender"><code>RenderMode.Prerender</code></a></a>, you can specify several configuration options to customize the prerendering and serving process.</p>

  <h4 id="parameterized-routes">
    <a href="#parameterized-routes" class="docs-anchor" tabindex="-1" aria-label="Link to Parameterized routes">Parameterized routes</a>
  </h4>
  <p>For each route with <a href="api/ssr/RenderMode#Prerender" title="API reference"><a href="/api/ssr/RenderMode#Prerender"><code>RenderMode.Prerender</code></a></a>, you can specify a <a href="api/ssr/ServerRoutePrerenderWithParams#getPrerenderParams" title="API reference"><code>getPrerenderParams</code></a> function. This function lets you control which specific parameters produce separate prerendered documents.</p>
<p>The <a href="api/ssr/ServerRoutePrerenderWithParams#getPrerenderParams" title="API reference"><code>getPrerenderParams</code></a> function returns a <code>Promise</code> that resolves to an array of objects. Each object is a key-value map of route parameter name to value. For example, if you define a route like <code>post/:id</code>, <code>getPrerenderParams </code> could return the array <code>[{id: 123}, {id: 456}]</code>, and thus render separate documents for <code>post/123</code> and <code>post/456</code>.</p>
<p>The body of <a href="api/ssr/ServerRoutePrerenderWithParams#getPrerenderParams" title="API reference"><code>getPrerenderParams</code></a> can use Angular's <a href="api/core/inject" title="API reference"><code>inject</code></a> function to inject dependencies and perform any work to determine which routes to prerender. This typically includes making requests to fetch data to construct the array of parameter values.</p>
<p>You can also use this function with catch-all routes (e.g., <code>/**</code>), where the parameter name will be <code>&quot;**&quot;</code> and the return value will be the segments of the path, such as <code>foo/bar</code>. These can be combined with other parameters (e.g., <code>/post/:id/**</code>) to handle more complex route configuration.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// app.routes.server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/RenderMode">RenderMode</a>, ServerRoute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/ServerRoute">ServerRoute</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'post/:id'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Prerender,</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPrerenderParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> dataService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(PostService);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> dataService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Assuming this returns ['1', '2', '3']</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ids.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ({ id })); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Generates paths like: /post/1, /post/2, /post/3</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'post/:id/**'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Prerender,</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPrerenderParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        { id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'1'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'**'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'foo/3'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        { id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'2'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'**'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'bar/4'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ]; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Generates paths like: /post/1/foo/3, /post/2/bar/4</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span></code></pre>
  </div><p>Because <a href="api/ssr/ServerRoutePrerenderWithParams#getPrerenderParams" title="API reference"><code>getPrerenderParams</code></a> exclusively applies to <a href="api/ssr/RenderMode#Prerender" title="API reference"><a href="/api/ssr/RenderMode#Prerender"><code>RenderMode.Prerender</code></a></a>, this function always runs at <em>build-time</em>. <code>getPrerenderParams</code> must not rely on any browser-specific or server-specific APIs for data.</p>

    <div class="docs-alert docs-alert-important">
    <p><strong>IMPORTANT:</strong> When using <a href="api/core/inject" title="API reference"><code>inject</code></a> inside <code>getPrerenderParams</code>, please remember that <code>inject</code> must be used synchronously. It cannot be invoked within asynchronous callbacks or following any <code>await</code> statements. For more information, refer to <a href="api/core/runInInjectionContext"><a href="/api/core/runInInjectionContext"><code>runInInjectionContext</code></a></a>.</p>

    </div>
    
  <h4 id="fallback-strategies">
    <a href="#fallback-strategies" class="docs-anchor" tabindex="-1" aria-label="Link to Fallback strategies">Fallback strategies</a>
  </h4>
  <p>When using <a href="api/ssr/RenderMode#Prerender" title="API reference"><a href="/api/ssr/RenderMode#Prerender"><code>RenderMode.Prerender</code></a></a> mode, you can specify a fallback strategy to handle requests for paths that haven't been prerendered.</p>
<p>The available fallback strategies are:</p>

  <ul class="docs-list">
    <li><strong>Server:</strong> Falls back to server-side rendering. This is the <strong>default</strong> behavior if no <code>fallback</code> property is specified.</li>
<li><strong>Client:</strong> Falls back to client-side rendering.</li>
<li><strong>None:</strong> No fallback. Angular will not handle requests for paths that are not prerendered.</li>

  </ul>
  <div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// app.routes.server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/RenderMode">RenderMode</a>, PrerenderFallback, ServerRoute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> serverRoutes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/ServerRoute">ServerRoute</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'post/:id'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    renderMode: RenderMode.Prerender,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fallback: PrerenderFallback.Client, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Fallback to CSR if not prerendered</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> getPrerenderParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // This function returns an array of objects representing prerendered posts at the paths:</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // `/post/1`, `/post/2`, and `/post/3`.</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // The path `/post/4` will utilize the fallback behavior if it's requested.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [{ id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, { id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }, { id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> }];</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span></code></pre>
  </div>
  <h2 id="authoring-server-compatible-components">
    <a href="#authoring-server-compatible-components" class="docs-anchor" tabindex="-1" aria-label="Link to Authoring server-compatible components">Authoring server-compatible components</a>
  </h2>
  <p>Some common browser APIs and capabilities might not be available on the server. Applications cannot make use of browser-specific global objects like <code>window</code>, <code>document</code>, <code>navigator</code>, or <code>location</code> as well as certain properties of <code>HTMLElement</code>.</p>
<p>In general, code which relies on browser-specific symbols should only be executed in the browser, not on the server. This can be enforced through the <a href="api/core/afterEveryRender"><a href="/api/core/afterEveryRender"><code>afterEveryRender</code></a></a> and <a href="api/core/afterNextRender"><a href="/api/core/afterNextRender"><code>afterNextRender</code></a></a> lifecycle hooks. These are only executed on the browser and skipped on the server.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/core/Component">Component</a>, ViewChild, afterNextRender } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'my-cmp'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> #content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;{{ ... }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/ViewChild">ViewChild</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">contentRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/ElementRef">ElementRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    <a href="/api/core/afterNextRender">afterNextRender</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Safe to check `scrollHeight` because this will only run in the browser, not the server.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'content height: '</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.contentRef.nativeElement.scrollHeight);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
  <h2 id="accessing-request-and-response-via-di">
    <a href="#accessing-request-and-response-via-di" class="docs-anchor" tabindex="-1" aria-label="Link to Accessing Request and Response via DI">Accessing Request and Response via DI</a>
  </h2>
  <p>The <code>@angular/core</code> package provides several tokens for interacting with the server-side rendering environment. These tokens give you access to crucial information and objects within your Angular application during SSR.</p>

  <ul class="docs-list">
    <li><strong><a href="api/core/REQUEST" title="API reference"><a href="/api/core/REQUEST"><code>REQUEST</code></a></a>:</strong> Provides access to the current request object, which is of type <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank"><code>Request</code></a> from the Web API. This allows you to access headers, cookies, and other request information.</li>
<li><strong><a href="api/core/RESPONSE_INIT" title="API reference"><a href="/api/core/RESPONSE_INIT"><code>RESPONSE_INIT</code></a></a>:</strong> Provides access to the response initialization options, which is of type <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response#parameters" target="_blank"><code>ResponseInit</code></a> from the Web API. This allows you to set headers and the status code for the response dynamically. Use this token to set headers or status codes that need to be determined at runtime.</li>
<li><strong><a href="api/core/REQUEST_CONTEXT" title="API reference"><a href="/api/core/REQUEST_CONTEXT"><code>REQUEST_CONTEXT</code></a></a>:</strong> Provides access to additional context related to the current request. This context can be passed as the second parameter of the <a href="api/ssr/AngularAppEngine#handle" title="API reference"><code>handle</code></a> function. Typically, this is used to provide additional request-related information that is not part of the standard Web API.</li>

  </ul>
  <div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { inject, REQUEST } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-my-component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;My Component&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> request</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/core/REQUEST">REQUEST</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(request?.url);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
    <div class="docs-alert docs-alert-important">
    <p><strong>IMPORTANT:</strong> The above tokens will be <code>null</code> in the following scenarios:</p>

    </div>
    
  <ul class="docs-list">
    <li>During the build processes.</li>
<li>When the application is rendered in the browser (CSR).</li>
<li>When performing static site generation (SSG).</li>
<li>During route extraction in development (at the time of the request).</li>

  </ul>
  
  <h2 id="generate-a-fully-static-application">
    <a href="#generate-a-fully-static-application" class="docs-anchor" tabindex="-1" aria-label="Link to Generate a fully static application">Generate a fully static application</a>
  </h2>
  <p>By default, Angular prerenders your entire application and generates a server file for handling requests. This allows your app to serve pre-rendered content to users. However, if you prefer a fully static site without a server, you can opt out of this behavior by setting the <code>outputMode</code> to <code>static</code> in your <code>angular.json</code> configuration file.</p>
<p>When <code>outputMode</code> is set to <code>static</code>, Angular generates pre-rendered HTML files for each route at build time, but it does not generate a server file or require a Node.js server to serve the app. This is useful for deploying to static hosting providers where a backend server is not needed.</p>
<p>To configure this, update your <code>angular.json</code> file as follows:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">  "projects"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    "your-app"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      "architect"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">        "build"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">          "options"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">            "outputMode"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"static"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
  <h2 id="caching-data-when-using-httpclient">
    <a href="#caching-data-when-using-httpclient" class="docs-anchor" tabindex="-1" aria-label="Link to Caching data when using HttpClient">Caching data when using HttpClient</a>
  </h2>
  <p><a href="api/common/http/HttpClient"><a href="/api/common/http/HttpClient"><code>HttpClient</code></a></a> cached outgoing network requests when running on the server. This information is serialized and transferred to the browser as part of the initial HTML sent from the server. In the browser, <a href="/api/common/http/HttpClient"><code>HttpClient</code></a> checks whether it has data in the cache and if so, reuses it instead of making a new HTTP request during initial application rendering. <a href="/api/common/http/HttpClient"><code>HttpClient</code></a> stops using the cache once an application becomes <a href="api/core/ApplicationRef#isStable">stable</a> while running in a browser.</p>
<p>By default, <a href="/api/common/http/HttpClient"><code>HttpClient</code></a> caches all <code>HEAD</code> and <code>GET</code> requests which don't contain <code>Authorization</code> or <code>Proxy-Authorization</code> headers. You can override those settings by using <a href="api/platform-browser/withHttpTransferCacheOptions"><a href="/api/platform-browser/withHttpTransferCacheOptions"><code>withHttpTransferCacheOptions</code></a></a> when providing hydration.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/platform-browser/bootstrapApplication">bootstrapApplication</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AppComponent, {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  providers: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    <a href="/api/platform-browser/provideClientHydration">provideClientHydration</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/platform-browser/withHttpTransferCacheOptions">withHttpTransferCacheOptions</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      includePostRequests: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">true</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }))</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
  </div>
  <h2 id="configuring-a-server">
    <a href="#configuring-a-server" class="docs-anchor" tabindex="-1" aria-label="Link to Configuring a server">Configuring a server</a>
  </h2>
  
  <h3 id="nodejs">
    <a href="#nodejs" class="docs-anchor" tabindex="-1" aria-label="Link to Node.js">Node.js</a>
  </h3>
  <p>The <code>@angular/ssr/node</code> extends <code>@angular/ssr</code> specifically for Node.js environments. It provides APIs that make it easier to implement server-side rendering within your Node.js application. For a complete list of functions and usage examples, refer to the <a href="api/ssr/node/AngularNodeAppEngine"><code>@angular/ssr/node</code> API reference</a> API reference.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/node/AngularNodeAppEngine">AngularNodeAppEngine</a>, createNodeRequestHandler, writeResponseToNodeResponse } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr/node'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> express </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'express'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> express</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> angularApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/node/AngularNodeAppEngine">AngularNodeAppEngine</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'*'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  angularApp</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (response) {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        <a href="/api/ssr/node/writeResponseToNodeResponse">writeResponseToNodeResponse</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(response, res);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">        next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Pass control to the next middleware</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    })</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(next);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * The request handler used by the Angular CLI (dev-server and during build).</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> reqHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/node/createNodeRequestHandler">createNodeRequestHandler</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(app);</span></span></code></pre>
  </div>
  <h3 id="non-nodejs">
    <a href="#non-nodejs" class="docs-anchor" tabindex="-1" aria-label="Link to Non-Node.js">Non-Node.js</a>
  </h3>
  <p>The <code>@angular/ssr</code> provides essential APIs for server-side rendering your Angular application on platforms other than Node.js. It leverages the standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank"><code>Request</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank"><code>Response</code></a> objects from the Web API, enabling you to integrate Angular SSR into various server environments. For detailed information and examples, refer to the <a href="api/ssr/AngularAppEngine"><code>@angular/ssr</code> API reference</a>.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// server.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/ssr/AngularAppEngine">AngularAppEngine</a>, createRequestHandler } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/ssr'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> angularApp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/AngularAppEngine">AngularAppEngine</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">/**</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> * This is a request handler used by the Angular CLI (dev-server and during build).</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"> */</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> reqHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/ssr/createRequestHandler">createRequestHandler</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">req</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> angularApp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(req);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span></code></pre>
  </div>