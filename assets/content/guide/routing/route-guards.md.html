<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">ä½¿ç”¨å®ˆå«æ§åˆ¶è·¯ç”±è®¿é—®</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/routing/route-guards.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    
    <div class="docs-alert docs-alert-critical">
    <p><strong>ä¸¥é‡è­¦å‘Šï¼š</strong>åˆ‡å‹¿å°†å®¢æˆ·ç«¯å®ˆå«ä½œä¸ºè®¿é—®æ§åˆ¶çš„å”¯ä¸€æ¥æºã€‚åœ¨ Web æµè§ˆå™¨ä¸­è¿è¡Œçš„æ‰€æœ‰ JavaScript éƒ½å¯èƒ½è¢«è¿è¡Œæµè§ˆå™¨çš„ç”¨æˆ·ä¿®æ”¹ã€‚é™¤äº†ä»»ä½•å®¢æˆ·ç«¯å®ˆå«ä¹‹å¤–ï¼Œå§‹ç»ˆåœ¨æœåŠ¡å™¨ç«¯å¼ºåˆ¶æ‰§è¡Œç”¨æˆ·æˆæƒã€‚</p>

    </div>
    <p>è·¯ç”±å®ˆå«æ˜¯ç”¨äºæ§åˆ¶ç”¨æˆ·æ˜¯å¦å¯ä»¥å¯¼èˆªåˆ°æŸä¸ªè·¯ç”±æˆ–ç¦»å¼€æŸä¸ªè·¯ç”±çš„å‡½æ•°ã€‚å®ƒä»¬å°±åƒæ£€æŸ¥ç‚¹ä¸€æ ·ï¼Œç®¡ç†ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç‰¹å®šè·¯ç”±ã€‚ä½¿ç”¨è·¯ç”±å®ˆå«çš„å¸¸è§ç¤ºä¾‹åŒ…æ‹¬èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶ã€‚</p>

  <h2 id="creating-a-route-guard">
    <a href="#creating-a-route-guard" class="docs-anchor" tabindex="-1" aria-label="Link to Creating a route guard">åˆ›å»ºè·¯ç”±å®ˆå«</a>
  </h2>
  <p>ä½ å¯ä»¥ä½¿ç”¨ Angular CLI ç”Ÿæˆè·¯ç”±å®ˆå«ï¼š</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> guard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> CUSTOM_NAME</span></span></code></pre>
  </div><p>è¿™å°†æç¤ºä½ é€‰æ‹©è¦ä½¿ç”¨çš„<a href="#types-of-route-guards">è·¯ç”±å®ˆå«ç±»å‹</a>ï¼Œç„¶ååˆ›å»ºç›¸åº”çš„ <code>CUSTOM_NAME-guard.ts</code> æ–‡ä»¶ã€‚</p>

    <div class="docs-alert docs-alert-tip">
    <p><strong>æç¤ºï¼š</strong>ä½ ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ Angular é¡¹ç›®ä¸­åˆ›å»ºå•ç‹¬çš„ TypeScript æ–‡ä»¶æ¥æ‰‹åŠ¨åˆ›å»ºè·¯ç”±å®ˆå«ã€‚å¼€å‘äººå‘˜é€šå¸¸åœ¨æ–‡ä»¶åä¸­æ·»åŠ  <code>-guard.ts</code> åç¼€ï¼Œä»¥åŒºåˆ«äºå…¶ä»–æ–‡ä»¶ã€‚</p>

    </div>
    
  <h2 id="route-guard-return-types">
    <a href="#route-guard-return-types" class="docs-anchor" tabindex="-1" aria-label="Link to Route guard return types">è·¯ç”±å®ˆå«çš„è¿”å›å€¼ç±»å‹</a>
  </h2>
  <p>æ‰€æœ‰è·¯ç”±å®ˆå«éƒ½å…±äº«ç›¸åŒçš„å¯èƒ½è¿”å›å€¼ç±»å‹ã€‚è¿™ä½¿ä½ åœ¨æ§åˆ¶å¯¼èˆªæ–¹é¢å…·æœ‰çµæ´»æ€§ï¼š</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th>è¿”å›å€¼ç±»å‹</th>
<th>æè¿°</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td><code>boolean</code></td>
<td><code>true</code> å…è®¸å¯¼èˆªï¼Œ<code>false</code> åˆ™é˜»æ­¢å¯¼èˆªï¼ˆè¯·å‚é˜…<a href="/api/router/CanMatch"><code>CanMatch</code></a> è·¯ç”±å®ˆå«çš„æ³¨é‡Šï¼‰</td>
</tr>
<tr>
<td><a href="/api/router/UrlTree"><code>UrlTree</code></a> æˆ– <a href="/api/router/RedirectCommand"><code>RedirectCommand</code></a></td>
<td>é‡å®šå‘åˆ°å¦ä¸€ä¸ªè·¯ç”±ï¼Œè€Œä¸æ˜¯é˜»æ­¢å¯¼èˆª</td>
</tr>
<tr>
<td><code>Promise&lt;T&gt;</code> æˆ– <code>Observable&lt;T&gt;</code></td>
<td>è·¯ç”±å™¨ä½¿ç”¨ç¬¬ä¸€ä¸ªå‘å‡ºçš„å€¼ï¼Œç„¶åå–æ¶ˆè®¢é˜…</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>æ³¨æ„ï¼š<a href="/api/router/CanMatch"><code>CanMatch</code></a> çš„è¡Œä¸ºæœ‰æ‰€ä¸åŒâ€”â€”å½“å®ƒè¿”å› <code>false</code> æ—¶ï¼ŒAngular ä¼šå°è¯•å…¶ä»–åŒ¹é…çš„è·¯ç”±ï¼Œè€Œä¸æ˜¯å®Œå…¨é˜»æ­¢å¯¼èˆªã€‚</p>

  <h2 id="types-of-route-guards">
    <a href="#types-of-route-guards" class="docs-anchor" tabindex="-1" aria-label="Link to Types of route guards">è·¯ç”±å®ˆå«çš„ç±»å‹</a>
  </h2>
  <p>Angular æä¾›äº†å››ç§ç±»å‹çš„è·¯ç”±å®ˆå«ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç”¨é€”ï¼š</p>

    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="#canactivate">
      CanActivate
    </a>
    
    <a class="docs-pill" href="#canactivatechild">
      CanActivateChild
    </a>
    
    <a class="docs-pill" href="#candeactivate">
      CanDeactivate
    </a>
    
    <a class="docs-pill" href="#canmatch">
      CanMatch
    </a>
    

    </nav>
    
  <h3 id="canactivate">
    <a href="#canactivate" class="docs-anchor" tabindex="-1" aria-label="Link to CanActivate">CanActivate</a>
  </h3>
  <p><a href="/api/router/CanActivate"><code>CanActivate</code></a> å®ˆå«å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®æŸä¸ªè·¯ç”±ã€‚å®ƒæœ€å¸¸ç”¨äºèº«ä»½éªŒè¯å’Œæˆæƒã€‚</p>
<p>å®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼š</p>

  <ul class="docs-list">
    <li><code>route: ActivatedRouteSnapshot</code> - åŒ…å«æœ‰å…³æ­£åœ¨æ¿€æ´»çš„è·¯ç”±çš„ä¿¡æ¯</li>
<li><code>state: RouterStateSnapshot</code> - åŒ…å«è·¯ç”±å™¨çš„å½“å‰çŠ¶æ€</li>

  </ul>
  <p>å®ƒå¯ä»¥è¿”å›<a href="#route-guard-return-types">æ ‡å‡†çš„å®ˆå«è¿”å›å€¼ç±»å‹</a>ã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> authGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/CanActivateFn">CanActivateFn</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/ActivatedRouteSnapshot">ActivatedRouteSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"><a href="/api/animations/state">state</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/RouterStateSnapshot">RouterStateSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> authService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AuthService);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isAuthenticated</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>æç¤ºï¼šå¦‚æœä½ éœ€è¦é‡å®šå‘ç”¨æˆ·ï¼Œè¯·è¿”å›ä¸€ä¸ª <a href="api/router/UrlTree"><code>URLTree</code></a> æˆ– <a href="api/router/RedirectCommand"></a><a href="/api/router/RedirectCommand"><code>RedirectCommand</code></a>ã€‚<strong>ä¸è¦</strong>è¿”å› <code>false</code> ç„¶åå†ä»¥ç¼–ç¨‹æ–¹å¼ <code>navigate</code> ç”¨æˆ·ã€‚</p>
<p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="api/router/CanActivateFn">CanActivateFn çš„ API æ–‡æ¡£</a>ã€‚</p>

  <h3 id="canactivatechild">
    <a href="#canactivatechild" class="docs-anchor" tabindex="-1" aria-label="Link to CanActivateChild">CanActivateChild</a>
  </h3>
  <p><a href="/api/router/CanActivateChild"><code>CanActivateChild</code></a> å®ˆå«å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®æŸä¸ªçˆ¶è·¯ç”±çš„å­è·¯ç”±ã€‚å½“ä½ æƒ³è¦ä¿æŠ¤åµŒå¥—è·¯ç”±çš„æ•´ä¸ªéƒ¨åˆ†æ—¶ï¼Œè¿™ä¼šå¾ˆæœ‰ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œ<code>canActivateChild</code> ä¼šä¸º<em>æ‰€æœ‰</em>å­è·¯ç”±è¿è¡Œã€‚å¦‚æœæœ‰ä¸€ä¸ªå­ç»„ä»¶ä¸‹é¢è¿˜æœ‰å¦ä¸€ä¸ªå­ç»„ä»¶ï¼Œ<code>canActivateChild</code> å°†ä¸ºè¿™ä¸¤ä¸ªç»„ä»¶å„è¿è¡Œä¸€æ¬¡ã€‚</p>
<p>å®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼š</p>

  <ul class="docs-list">
    <li><code>childRoute: ActivatedRouteSnapshot</code> - åŒ…å«æœ‰å…³æ­£åœ¨æ¿€æ´»çš„å­è·¯ç”±çš„â€œæœªæ¥â€å¿«ç…§ï¼ˆå³è·¯ç”±å™¨æ­£åœ¨å°è¯•å¯¼èˆªåˆ°çš„çŠ¶æ€ï¼‰çš„ä¿¡æ¯</li>
<li><code>state: RouterStateSnapshot</code> - åŒ…å«è·¯ç”±å™¨çš„å½“å‰çŠ¶æ€</li>

  </ul>
  <p>å®ƒå¯ä»¥è¿”å›<a href="#route-guard-return-types">æ ‡å‡†çš„å®ˆå«è¿”å›å€¼ç±»å‹</a>ã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> adminChildGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/CanActivateChildFn">CanActivateChildFn</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">childRoute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/ActivatedRouteSnapshot">ActivatedRouteSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"><a href="/api/animations/state">state</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/RouterStateSnapshot">RouterStateSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> authService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(AuthService);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> authService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hasRole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'admin'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="api/router/CanActivateChildFn">CanActivateChildFn çš„ API æ–‡æ¡£</a>ã€‚</p>

  <h3 id="candeactivate">
    <a href="#candeactivate" class="docs-anchor" tabindex="-1" aria-label="Link to CanDeactivate">CanDeactivate</a>
  </h3>
  <p><a href="/api/router/CanDeactivate"><code>CanDeactivate</code></a> å®ˆå«å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥ç¦»å¼€æŸä¸ªè·¯ç”±ã€‚ä¸€ä¸ªå¸¸è§çš„åœºæ™¯æ˜¯é˜²æ­¢ç”¨æˆ·ç¦»å¼€æœªä¿å­˜è¡¨å•çš„è·¯ç”±ã€‚</p>
<p>å®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼š</p>

  <ul class="docs-list">
    <li><code>component: T</code> - æ­£åœ¨åœç”¨çš„ç»„ä»¶å®ä¾‹</li>
<li><code>currentRoute: ActivatedRouteSnapshot</code> - åŒ…å«æœ‰å…³å½“å‰è·¯ç”±çš„ä¿¡æ¯</li>
<li><code>currentState: RouterStateSnapshot</code> - åŒ…å«å½“å‰çš„è·¯ç”±å™¨çŠ¶æ€</li>
<li><code>nextState: RouterStateSnapshot</code> - åŒ…å«æ­£åœ¨å¯¼èˆªåˆ°çš„ä¸‹ä¸€ä¸ªè·¯ç”±å™¨çŠ¶æ€</li>

  </ul>
  <p>å®ƒå¯ä»¥è¿”å›<a href="#route-guard-return-types">æ ‡å‡†çš„å®ˆå«è¿”å›å€¼ç±»å‹</a>ã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> unsavedChangesGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/CanDeactivateFn">CanDeactivateFn</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FormComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FormComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">currentRoute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/ActivatedRouteSnapshot">ActivatedRouteSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">currentState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/RouterStateSnapshot">RouterStateSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">nextState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/RouterStateSnapshot">RouterStateSnapshot</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> component.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">hasUnsavedChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">()</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    ?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> confirm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'You have unsaved changes. Are you sure you want to leave?'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    :</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="api/router/CanDeactivateFn">CanDeactivateFn çš„ API æ–‡æ¡£</a>ã€‚</p>

  <h3 id="canmatch">
    <a href="#canmatch" class="docs-anchor" tabindex="-1" aria-label="Link to CanMatch">CanMatch</a>
  </h3>
  <p><a href="/api/router/CanMatch"><code>CanMatch</code></a> å®ˆå«åœ¨è·¯å¾„åŒ¹é…æœŸé—´ç¡®å®šè·¯ç”±æ˜¯å¦å¯ä»¥åŒ¹é…ã€‚ä¸å…¶ä»–å®ˆå«ä¸åŒï¼Œæ‹’ç»ä¼šç»§ç»­å°è¯•å…¶ä»–åŒ¹é…çš„è·¯ç”±ï¼Œè€Œä¸æ˜¯å®Œå…¨é˜»æ­¢å¯¼èˆªã€‚è¿™å¯¹äºåŠŸèƒ½æ ‡å¿—ã€A/B æµ‹è¯•æˆ–æ¡ä»¶è·¯ç”±åŠ è½½éå¸¸æœ‰ç”¨ã€‚</p>
<p>å®ƒå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é»˜è®¤å‚æ•°ï¼š</p>

  <ul class="docs-list">
    <li><code>route: Route</code> - æ­£åœ¨è¯„ä¼°çš„è·¯ç”±é…ç½®</li>
<li><code>segments: UrlSegment[]</code> - å°šæœªè¢«å…ˆå‰çˆ¶è·¯ç”±è¯„ä¼°æ¶ˆè€—çš„ URL ç‰‡æ®µ</li>

  </ul>
  <p>å®ƒå¯ä»¥è¿”å›<a href="#route-guard-return-types">æ ‡å‡†çš„å®ˆå«è¿”å›å€¼ç±»å‹</a>ï¼Œä½†å½“å®ƒè¿”å› <code>false</code> æ—¶ï¼ŒAngular ä¼šå°è¯•å…¶ä»–åŒ¹é…çš„è·¯ç”±ï¼Œè€Œä¸æ˜¯å®Œå…¨é˜»æ­¢å¯¼èˆªã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> featureToggleGuard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/CanMatchFn">CanMatchFn</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/Route">Route</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">segments</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/UrlSegment">UrlSegment</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> featureService</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FeatureService);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> featureService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">isFeatureEnabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'newDashboard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>å®ƒè¿˜å¯ä»¥è®©ä½ ä¸ºåŒä¸€è·¯å¾„ä½¿ç”¨ä¸åŒçš„ç»„ä»¶ã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// ğŸ“„ routes.ts</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> routes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/Routes">Routes</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dashboard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: AdminDashboard,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canMatch: [adminGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dashboard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: UserDashboard,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canMatch: [userGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span></code></pre>
  </div><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå½“ç”¨æˆ·è®¿é—® <code>/dashboard</code> æ—¶ï¼Œå°†ä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…æ­£ç¡®å®ˆå«çš„è·¯ç”±ã€‚</p>
<p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="api/router/CanMatchFn">CanMatchFn çš„ API æ–‡æ¡£</a>ã€‚</p>

  <h2 id="applying-guards-to-routes">
    <a href="#applying-guards-to-routes" class="docs-anchor" tabindex="-1" aria-label="Link to Applying guards to routes">å°†å®ˆå«åº”ç”¨äºè·¯ç”±</a>
  </h2>
  <p>åˆ›å»ºè·¯ç”±å®ˆå«åï¼Œä½ éœ€è¦åœ¨è·¯ç”±å®šä¹‰ä¸­é…ç½®å®ƒä»¬ã€‚</p>
<p>å®ˆå«åœ¨è·¯ç”±é…ç½®ä¸­æŒ‡å®šä¸ºæ•°ç»„ï¼Œä»¥ä¾¿ä½ å¯ä»¥å°†å¤šä¸ªå®ˆå«åº”ç”¨äºå•ä¸ªè·¯ç”±ã€‚å®ƒä»¬æŒ‰åœ¨æ•°ç»„ä¸­å‡ºç°çš„é¡ºåºæ‰§è¡Œã€‚</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/router/Routes">Routes</a> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/router'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { authGuard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './guards/auth.guard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { adminGuard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './guards/admin.guard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { canDeactivateGuard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './guards/can-deactivate.guard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { featureToggleGuard } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './guards/feature-toggle.guard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> routes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/router/Routes">Routes</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Basic CanActivate - requires authentication</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'dashboard'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: DashboardComponent,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canActivate: [authGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Multiple CanActivate guards - requires authentication AND admin role</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'admin'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: AdminComponent,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canActivate: [authGuard, adminGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // <a href="/api/router/CanActivate">CanActivate</a> + CanDeactivate - protected route with unsaved changes check</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'profile'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: ProfileComponent,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canActivate: [authGuard],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canDeactivate: [canDeactivateGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // <a href="/api/router/CanActivateChild">CanActivateChild</a> - protects all child routes</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'users'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// /user - NOT protected</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canActivateChild: [authGuard],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    children: [</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // /users/list - PROTECTED</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'list'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, component: UserListComponent },</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // /useres/detail/:id - PROTECTED</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      { path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'detail/:id'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, component: UserDetailComponent }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // <a href="/api/router/CanMatch">CanMatch</a> - conditionally matches route based on feature flag</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'beta-feature'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: BetaFeatureComponent,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    canMatch: [featureToggleGuard]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Fallback route if beta feature is disabled</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'beta-feature'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component: ComingSoonComponent</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">];</span></span></code></pre>
  </div>