<header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">组件生命周期</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/components/lifecycle.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    
    <div class="docs-alert docs-alert-tip">
    <p><strong>提示：</strong> 本指南假设你已经阅读过<a href="essentials">《要点指南》</a>。如果你是 Angular 新手，请先阅读它。</p>

    </div>
    <p>组件的<strong>生命周期</strong>是指组件创建和销毁之间发生的一系列步骤。每个步骤都代表了 Angular 渲染组件并在一段时间内检查更新过程的不同部分。</p>
<p>在你的组件中，你可以实现<strong>生命周期钩子</strong>，以便在这些步骤中运行代码。与特定组件实例相关的生命周期钩子在你的组件类中以方法的形式实现。与整个 Angular 应用相关的生命周期钩子则以接受回调的函数的形式实现。</p>
<p>组件的生命周期与 Angular 如何随时间推移检查组件变更紧密相关。为了理解这个生命周期，你只需要知道 Angular 会从上到下遍历你的应用树，检查模板绑定是否有变更。下面描述的生命周期钩子在 Angular 执行此遍历时运行。此遍历会精确访问每个组件一次，因此你应该始终避免在此过程的中间进行进一步的状态更改。</p>

  <h2 id="summary">
    <a href="#summary" class="docs-anchor" tabindex="-1" aria-label="Link to Summary">摘要</a>
  </h2>
  <div class="docs-table docs-scroll-track-transparent">
  <table>
    <tbody><tr>
      <td><strong>阶段</strong></td>
      <td><strong>方法</strong></td>
      <td><strong>摘要</strong></td>
    </tr>
    <tr>
      <td>创建</td>
      <td><code>constructor</code></td>
      <td>
        <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Classes/constructor" target="_blank">
          标准 JavaScript 类构造函数
        </a>。当 Angular 实例化组件时运行。</td>
    </tr>
    <tr>
      <td rowspan="7">变更<p>检测</p></td>
      <td><code>ngOnInit</code>
      </td>
      <td>在 Angular 初始化完组件的所有输入之后运行一次。</td>
    </tr>
    <tr>
      <td><code>ngOnChanges</code></td>
      <td>每次组件的输入发生更改时都会运行。</td>
    </tr>
    <tr>
      <td><code>ngDoCheck</code></td>
      <td>每次检查此组件是否有更改时都会运行。</td>
    </tr>
    <tr>
      <td><code>ngAfterContentInit</code></td>
      <td>在组件的<em>内容</em>初始化之后运行一次。</td>
    </tr>
    <tr>
      <td><code>ngAfterContentChecked</code></td>
      <td>每次检查此组件内容是否有更改时都会运行。</td>
    </tr>
    <tr>
      <td><code>ngAfterViewInit</code></td>
      <td>在组件的<em>视图</em>初始化之后运行一次。</td>
    </tr>
    <tr>
      <td><code>ngAfterViewChecked</code></td>
      <td>每次检查组件的视图是否有更改时都会运行。</td>
    </tr>
    <tr>
      <td rowspan="2">渲染</td>
      <td><code>afterNextRender</code></td>
      <td>在<strong>所有</strong>组件下次渲染到 DOM 后运行一次。</td>
    </tr>
    <tr>
      <td><code>afterEveryRender</code></td>
      <td>每次<strong>所有</strong>组件渲染到 DOM 后都会运行。</td>
    </tr>
    <tr>
      <td>销毁</td>
      <td><code>ngOnDestroy</code></td>
      <td>在组件销毁之前运行一次。</td>
    </tr>
  </tbody></table>
</div>


  <h3 id="ngoninit">
    <a href="#ngoninit" class="docs-anchor" tabindex="-1" aria-label="Link to ngOnInit">ngOnInit</a>
  </h3>
  <p><code>ngOnInit</code> 方法在 Angular 使用初始值初始化完所有组件输入之后运行。组件的 <code>ngOnInit</code> 恰好运行一次。</p>
<p>此步骤发生在组件自身的模板初始化<em>之前</em>。这意味着你可以根据其初始输入值更新组件的状态。</p>

  <h3 id="ngonchanges">
    <a href="#ngonchanges" class="docs-anchor" tabindex="-1" aria-label="Link to ngOnChanges">ngOnChanges</a>
  </h3>
  <p><code>ngOnChanges</code> 方法在任何组件输入发生更改后运行。</p>
<p>此步骤发生在检查组件自身的模板<em>之前</em>。这意味着你可以根据其初始输入值更新组件的状态。</p>
<p>在初始化期间，第一次 <code>ngOnChanges</code> 在 <code>ngOnInit</code> 之前运行。</p>

  <h4 id="inspecting-changes">
    <a href="#inspecting-changes" class="docs-anchor" tabindex="-1" aria-label="Link to Inspecting changes">检查变更</a>
  </h4>
  <p><code>ngOnChanges</code> 方法接受一个 <a href="/api/core/SimpleChanges"><code>SimpleChanges</code></a> 参数。该对象是一个 <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#recordkeys-type" target="_blank"><code>Record</code></a>，将每个组件输入名称映射到一个 <a href="/api/core/SimpleChange"><code>SimpleChange</code></a> 对象。每个 <a href="/api/core/SimpleChange"><code>SimpleChange</code></a> 包含输入的先前值、当前值以及一个标志，指示该输入是否是第一次更改。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /* ... */</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UserProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/input">input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ngOnChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">changes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/SimpleChanges">SimpleChanges</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> inputName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> changes) {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> inputValues</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> changes[inputName];</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Previous ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} == ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputValues</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">previousValue</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Current ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} == ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputValues</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">currentValue</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Is first ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">} change == ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">inputValues</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">firstChange</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>如果您为任何输入属性提供了<code>别名</code>，则 <a href="/api/core/SimpleChanges"><code>SimpleChanges</code></a> Record 仍将使用 TypeScript 属性名作为键，而不是别名。</p>

  <h3 id="ngondestroy">
    <a href="#ngondestroy" class="docs-anchor" tabindex="-1" aria-label="Link to ngOnDestroy">ngOnDestroy</a>
  </h3>
  <p><code>ngOnDestroy</code> 方法在组件销毁之前运行一次。当组件不再显示在页面上时，Angular 会销毁组件，例如被 <code>@if</code> 隐藏或导航到另一个页面时。</p>

  <h4 id="destroyref">
    <a href="#destroyref" class="docs-anchor" tabindex="-1" aria-label="Link to DestroyRef">DestroyRef</a>
  </h4>
  <p>作为 <code>ngOnDestroy</code> 方法的替代方案，您可以注入 <a href="/api/core/DestroyRef"><code>DestroyRef</code></a> 的实例。通过调用 <a href="/api/core/DestroyRef"><code>DestroyRef</code></a> 的 <code>onDestroy</code> 方法，您可以注册一个回调函数，在组件销毁时调用它。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /* ... */</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UserProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(<a href="/api/core/DestroyRef">DestroyRef</a>).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">onDestroy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'UserProfile destruction'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>您可以将 <a href="/api/core/DestroyRef"><code>DestroyRef</code></a> 实例传递给组件外部的函数或类。如果您有其他代码需要在组件销毁时运行一些清理行为，请使用此模式。</p>
<p>您还可以使用 <a href="/api/core/DestroyRef"><code>DestroyRef</code></a> 将设置代码与清理代码放在一起，而不是将所有清理代码都放在 <code>ngOnDestroy</code> 方法中。</p>

  <h3 id="ngdocheck">
    <a href="#ngdocheck" class="docs-anchor" tabindex="-1" aria-label="Link to ngDoCheck">ngDoCheck</a>
  </h3>
  <p>每次 Angular 检查组件模板是否有更改之前，<code>ngDoCheck</code> 方法都会运行。</p>
<p>你可以使用此生命周期钩子来手动检查 Angular 正常变更检测之外的状态更改，并手动更新组件的状态。</p>
<p>此方法会非常频繁地运行，并且可能会严重影响页面的性能。请尽可能避免定义此钩子，仅在别无选择时才使用它。</p>
<p>在初始化期间，第一次 <code>ngDoCheck</code> 在 <code>ngOnInit</code> 之后运行。</p>

  <h3 id="ngaftercontentinit">
    <a href="#ngaftercontentinit" class="docs-anchor" tabindex="-1" aria-label="Link to ngAfterContentInit">ngAfterContentInit</a>
  </h3>
  <p><code>ngAfterContentInit</code> 方法在组件内部嵌套的所有子组件（即其<em>内容</em>）都初始化之后运行一次。</p>
<p>你可以使用此生命周期钩子来读取<a href="guide/components/queries#content-queries">内容查询</a>的结果。虽然你可以访问这些查询的初始化状态，但尝试在此方法中更改任何状态都会导致<a href="errors/NG0100">ExpressionChangedAfterItHasBeenCheckedError</a></p>

  <h3 id="ngaftercontentchecked">
    <a href="#ngaftercontentchecked" class="docs-anchor" tabindex="-1" aria-label="Link to ngAfterContentChecked">ngAfterContentChecked</a>
  </h3>
  <p>每次检查组件内部嵌套的子组件（即其<em>内容</em>）是否有更改时，<code>ngAfterContentChecked</code> 方法都会运行。</p>
<p>此方法会非常频繁地运行，并且可能会严重影响页面的性能。请尽可能避免定义此钩子，仅在别无选择时才使用它。</p>
<p>虽然你可以在此处访问<a href="guide/components/queries#content-queries">内容查询</a>的更新状态，但尝试在此方法中更改任何状态都会导致<a href="errors/NG0100">ExpressionChangedAfterItHasBeenCheckedError</a>。</p>

  <h3 id="ngafterviewinit">
    <a href="#ngafterviewinit" class="docs-anchor" tabindex="-1" aria-label="Link to ngAfterViewInit">ngAfterViewInit</a>
  </h3>
  <p><code>ngAfterViewInit</code> 方法在组件模板（即<em>视图</em>）中的所有子条目都完成初始化之后运行一次。</p>
<p>你可以使用这个生命周期钩子来读取<a href="guide/components/queries#view-queries">视图查询</a>的结果。虽然你可以访问这些查询的初始化状态，但是尝试在此方法中更改任何状态都会导致 <a href="errors/NG0100">ExpressionChangedAfterItHasBeenCheckedError</a> 错误。</p>

  <h3 id="ngafterviewchecked">
    <a href="#ngafterviewchecked" class="docs-anchor" tabindex="-1" aria-label="Link to ngAfterViewChecked">ngAfterViewChecked</a>
  </h3>
  <p><code>ngAfterViewChecked</code> 方法在每次组件模板（即<em>视图</em>）中的子条目完成变更检查之后运行。</p>
<p>此方法会非常频繁地运行，并且可能会严重影响页面的性能。请尽可能避免定义此钩子，仅在别无选择时才使用它。</p>
<p>虽然你可以在此处访问<a href="guide/components/queries#view-queries">视图查询</a>的更新状态，但是尝试在此方法中更改任何状态都会导致 <a href="errors/NG0100">ExpressionChangedAfterItHasBeenCheckedError</a> 错误。</p>

  <h3 id="aftereveryrender-and-afternextrender">
    <a href="#aftereveryrender-and-afternextrender" class="docs-anchor" tabindex="-1" aria-label="Link to afterEveryRender and afterNextRender">afterEveryRender 和 afterNextRender</a>
  </h3>
  <p><code>afterEveryRender</code> 和 <code>afterNextRender</code> 函数允许您注册一个<strong>渲染回调</strong>，该回调将在 Angular 完成将页面上<em>所有组件</em>渲染到 DOM 后调用。</p>
<p>这些函数与本指南中描述的其他生命周期钩子不同。它们不是类方法，而是接受回调的独立函数。渲染回调的执行不依赖于任何特定的组件实例，而是一个应用级的钩子。</p>
<p><code>afterEveryRender</code> 和 <code>afterNextRender</code> 必须在<a href="guide/di/dependency-injection-context">注入上下文</a>中调用，通常是组件的构造函数。</p>
<p>你可以使用渲染回调来执行手动 DOM 操作。有关在 Angular 中使用 DOM 的指南，请参阅<a href="guide/components/dom-apis">使用 DOM API</a>。</p>
<p>渲染回调在服务器端渲染或构建时预渲染期间不会运行。</p>

  <h4 id="afterrender-phases">
    <a href="#afterrender-phases" class="docs-anchor" tabindex="-1" aria-label="Link to after*Render phases">after*Render 阶段</a>
  </h4>
  <p>使用 <code>afterEveryRender</code> 或 <code>afterNextRender</code> 时，您可以选择将工作拆分为多个阶段。该阶段让您控制 DOM 操作的顺序，允许您将<em>写入</em>操作排在<em>读取</em>操作之前，以最小化<a href="https://web.dev/avoid-large-complex-layouts-and-layout-thrashing" target="_blank">布局抖动</a>。为了在阶段之间进行通信，阶段函数可以返回一个结果值，该值可以在下一个阶段中访问。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {<a href="/api/core/Component">Component</a>, ElementRef, afterNextRender} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UserProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> prevPadding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> elementHeight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    private elementRef </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(<a href="/api/core/ElementRef">ElementRef</a>);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> nativeElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> elementRef.nativeElement;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    <a href="/api/core/afterNextRender">afterNextRender</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Use the `Write` phase to write to a geometric property.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> padding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> computePadding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> changed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> padding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.prevPadding;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (changed) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">          nativeElement.style.padding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> padding;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> changed; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Communicate whether anything changed to the read phase.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      },</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Use the `Read` phase to read geometric properties after all writes have occurred.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">      read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">didWrite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (didWrite) {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">          this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.elementHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">().height;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>共有四个阶段，按以下顺序运行：</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th>阶段</th>
<th>描述</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td><code>earlyRead</code></td>
<td>使用此阶段读取任何对于后续计算而言绝对必要的、影响布局的 DOM 属性和样式。如果可能，请避免使用此阶段，而首选 <code>write</code> 和 <code>read</code> 阶段。</td>
</tr>
<tr>
<td><code>mixedReadWrite</code></td>
<td>默认阶段。用于任何需要同时读取和写入影响布局的属性和样式的操作。如果可能，请避免使用此阶段，而首选显式的 <code>write</code> 和 <code>read</code> 阶段。</td>
</tr>
<tr>
<td><code>write</code></td>
<td>使用此阶段写入影响布局的 DOM 属性和样式。</td>
</tr>
<tr>
<td><code>read</code></td>
<td>使用此阶段读取任何影响布局的 DOM 属性。</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h2 id="lifecycle-interfaces">
    <a href="#lifecycle-interfaces" class="docs-anchor" tabindex="-1" aria-label="Link to Lifecycle interfaces">生命周期接口</a>
  </h2>
  <p>Angular 为每个生命周期方法提供了一个 TypeScript 接口。你可以选择导入并 <code>implement</code> 这些接口，以确保你的实现没有任何拼写错误。</p>
<p>每个接口的名称都与相应的方法相同，只是去掉了 <code>ng</code> 前缀。例如，<code>ngOnInit</code> 的接口是 <a href="/api/core/OnInit"><code>OnInit</code></a>。</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  /* ... */</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> UserProfile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/OnInit">OnInit</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ngOnInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    /* ... */</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
  <h2 id="execution-order">
    <a href="#execution-order" class="docs-anchor" tabindex="-1" aria-label="Link to Execution order">执行顺序</a>
  </h2>
  <p>以下图表显示了 Angular 生命周期钩子的执行顺序。</p>

  <h3 id="during-initialization">
    <a href="#during-initialization" class="docs-anchor" tabindex="-1" aria-label="Link to During initialization">在初始化期间</a>
  </h3>
  <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 575.53125 997" style="max-width: 575.53125px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-generated-diagram .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_afterNextRender_afterEveryRender_0" d="M287.766,885L287.766,889.167C287.766,893.333,287.766,901.667,287.766,909.333C287.766,917,287.766,924,287.766,927.5L287.766,931"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_id_CHANGE_0" d="M287.766,62L287.766,66.167C287.766,70.333,287.766,78.667,287.766,86.333C287.766,94,287.766,101,287.766,104.5L287.766,108"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CHANGE_afterNextRender_0" d="M287.766,757L287.766,763.167C287.766,769.333,287.766,781.667,287.766,793.333C287.766,805,287.766,816,287.766,821.5L287.766,827"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(287.765625, 794)" class="edgeLabel"><g transform="translate(-35.6640625, -12)" class="label"><foreignObject height="24" width="71.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Rendering</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 104)" class="root"><g class="clusters"><g data-look="classic" id="CHANGE" class="cluster"><rect height="645" width="559.53125" y="8" x="8" style=""></rect><g transform="translate(224.8125, 8)" class="cluster-label"><foreignObject height="24" width="125.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Change detection</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngOnChanges_ngOnInit_0" d="M293.453,99.5L293.453,105.75C293.453,112,293.453,124.5,293.453,136.333C293.453,148.167,293.453,159.333,293.453,164.917L293.453,170.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngOnInit_ngDoCheck_0" d="M293.453,228.5L293.453,234.75C293.453,241,293.453,253.5,293.453,265.333C293.453,277.167,293.453,288.333,293.453,293.917L293.453,299.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngDoCheck_ngAfterContentInit_0" d="M236.991,357.5L223.921,363.75C210.85,370,184.71,382.5,171.64,394.333C158.57,406.167,158.57,417.333,158.57,422.917L158.57,428.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngDoCheck_ngAfterViewInit_0" d="M349.916,357.5L362.986,363.75C376.056,370,402.196,382.5,415.266,394.333C428.336,406.167,428.336,417.333,428.336,422.917L428.336,428.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngAfterContentInit_ngAfterContentChecked_0" d="M158.57,486.5L158.57,492.75C158.57,499,158.57,511.5,158.57,523.333C158.57,535.167,158.57,546.333,158.57,551.917L158.57,557.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngAfterViewInit_ngAfterViewChecked_0" d="M428.336,486.5L428.336,492.75C428.336,499,428.336,511.5,428.336,523.333C428.336,535.167,428.336,546.333,428.336,551.917L428.336,557.5"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(293.453125, 72.5)" id="flowchart-ngOnChanges-2" class="node default"><rect height="54" width="155" y="-27" x="-77.5" style="" class="basic label-container"></rect><g transform="translate(-47.5, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="95"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngOnChanges</p></span></div></foreignObject></g></g><g transform="translate(293.453125, 201.5)" id="flowchart-ngOnInit-3" class="node default"><rect height="54" width="120.40625" y="-27" x="-60.203125" style="" class="basic label-container"></rect><g transform="translate(-30.203125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="60.40625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngOnInit</p></span></div></foreignObject></g></g><g transform="translate(293.453125, 330.5)" id="flowchart-ngDoCheck-5" class="node default"><rect height="54" width="138.203125" y="-27" x="-69.1015625" style="" class="basic label-container"></rect><g transform="translate(-39.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="78.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngDoCheck</p></span></div></foreignObject></g></g><g transform="translate(158.5703125, 459.5)" id="flowchart-ngAfterContentInit-7" class="node default"><rect height="54" width="194.578125" y="-27" x="-97.2890625" style="" class="basic label-container"></rect><g transform="translate(-67.2890625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="134.578125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterContentInit</p></span></div></foreignObject></g></g><g transform="translate(428.3359375, 459.5)" id="flowchart-ngAfterViewInit-9" class="node default"><rect height="54" width="171.828125" y="-27" x="-85.9140625" style="" class="basic label-container"></rect><g transform="translate(-55.9140625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="111.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterViewInit</p></span></div></foreignObject></g></g><g transform="translate(158.5703125, 588.5)" id="flowchart-ngAfterContentChecked-11" class="node default"><rect height="54" width="231.140625" y="-27" x="-115.5703125" style="" class="basic label-container"></rect><g transform="translate(-85.5703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="171.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterContentChecked</p></span></div></foreignObject></g></g><g transform="translate(428.3359375, 588.5)" id="flowchart-ngAfterViewChecked-13" class="node default"><rect height="54" width="208.390625" y="-27" x="-104.1953125" style="" class="basic label-container"></rect><g transform="translate(-74.1953125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="148.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterViewChecked</p></span></div></foreignObject></g></g></g></g><g transform="translate(287.765625, 35)" id="flowchart-id-0" class="node default"><rect height="54" width="142.109375" y="-27" x="-71.0546875" style="" class="basic label-container"></rect><g transform="translate(-41.0546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="82.109375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>constructor</p></span></div></foreignObject></g></g><g transform="translate(287.765625, 858)" id="flowchart-afterNextRender-15" class="node default"><rect height="54" width="178.90625" y="-27" x="-89.453125" style="" class="basic label-container"></rect><g transform="translate(-59.453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="118.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>afterNextRender</p></span></div></foreignObject></g></g><g transform="translate(287.765625, 962)" id="flowchart-afterEveryRender-16" class="node default"><rect height="54" width="184.84375" y="-27" x="-92.421875" style="" class="basic label-container"></rect><g transform="translate(-62.421875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="124.84375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>afterEveryRender</p></span></div></foreignObject></g></g></g></g></g></svg>
  <h3 id="subsequent-updates">
    <a href="#subsequent-updates" class="docs-anchor" tabindex="-1" aria-label="Link to Subsequent updates">后续更新</a>
  </h3>
  <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 575.53125 531" style="max-width: 575.53125px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#mermaid-generated-diagram .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CHANGE_afterEveryRender_0" d="M287.766,395L287.766,401.167C287.766,407.333,287.766,419.667,287.766,431.333C287.766,443,287.766,454,287.766,459.5L287.766,465"></path></g><g class="edgeLabels"><g transform="translate(287.765625, 432)" class="edgeLabel"><g transform="translate(-35.6640625, -12)" class="label"><foreignObject height="24" width="71.328125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Rendering</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 0)" class="root"><g class="clusters"><g data-look="classic" id="CHANGE" class="cluster"><rect height="387" width="559.53125" y="8" x="8" style=""></rect><g transform="translate(224.8125, 8)" class="cluster-label"><foreignObject height="24" width="125.90625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Change detection</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngOnChanges_ngDoCheck_0" d="M293.453,99.5L293.453,105.75C293.453,112,293.453,124.5,293.453,136.333C293.453,148.167,293.453,159.333,293.453,164.917L293.453,170.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngDoCheck_ngAfterContentChecked_0" d="M236.991,228.5L223.921,234.75C210.85,241,184.71,253.5,171.64,265.333C158.57,277.167,158.57,288.333,158.57,293.917L158.57,299.5"></path><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_ngDoCheck_ngAfterViewChecked_0" d="M349.916,228.5L362.986,234.75C376.056,241,402.196,253.5,415.266,265.333C428.336,277.167,428.336,288.333,428.336,293.917L428.336,299.5"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(293.453125, 72.5)" id="flowchart-ngOnChanges-0" class="node default"><rect height="54" width="155" y="-27" x="-77.5" style="" class="basic label-container"></rect><g transform="translate(-47.5, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="95"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngOnChanges</p></span></div></foreignObject></g></g><g transform="translate(293.453125, 201.5)" id="flowchart-ngDoCheck-1" class="node default"><rect height="54" width="138.203125" y="-27" x="-69.1015625" style="" class="basic label-container"></rect><g transform="translate(-39.1015625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="78.203125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngDoCheck</p></span></div></foreignObject></g></g><g transform="translate(158.5703125, 330.5)" id="flowchart-ngAfterContentChecked-3" class="node default"><rect height="54" width="231.140625" y="-27" x="-115.5703125" style="" class="basic label-container"></rect><g transform="translate(-85.5703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="171.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterContentChecked</p></span></div></foreignObject></g></g><g transform="translate(428.3359375, 330.5)" id="flowchart-ngAfterViewChecked-5" class="node default"><rect height="54" width="208.390625" y="-27" x="-104.1953125" style="" class="basic label-container"></rect><g transform="translate(-74.1953125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="148.390625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ngAfterViewChecked</p></span></div></foreignObject></g></g></g></g><g transform="translate(287.765625, 496)" id="flowchart-afterEveryRender-7" class="node default"><rect height="54" width="184.84375" y="-27" x="-92.421875" style="" class="basic label-container"></rect><g transform="translate(-62.421875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="124.84375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>afterEveryRender</p></span></div></foreignObject></g></g></g></g></g></svg>
  <h3 id="ordering-with-directives">
    <a href="#ordering-with-directives" class="docs-anchor" tabindex="-1" aria-label="Link to Ordering with directives">指令的顺序</a>
  </h3>
  <p>当你在模板中或使用 <code>hostDirectives</code> 属性将一个或多个指令与组件放在同一元素上时，框架不保证组件和单个元素上的指令之间给定生命周期钩子的任何顺序。永远不要依赖观察到的顺序，因为这可能会在 Angular 的后续版本中发生变化。</p>
