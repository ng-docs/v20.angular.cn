
    <header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Structural directives</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/directives/structural-directives.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Structural directives are directives applied to an <code>&lt;ng-template&gt;</code> element that conditionally or repeatedly render the content of that <code>&lt;ng-template&gt;</code>.</p>

  <h2 id="example-use-case">
    <a href="#example-use-case" class="docs-anchor" tabindex="-1" aria-label="Link to Example use case">Example use case</a>
  </h2>
  <p>In this guide you'll build a structural directive which fetches data from a given data source and renders its template when that data is available. This directive is called <code>SelectDirective</code>, after the SQL keyword <code>SELECT</code>, and match it with an attribute selector <code>[select]</code>.</p>
<p><code>SelectDirective</code> will have an input naming the data source to be used, which you will call <code>selectFrom</code>. The <code>select</code> prefix for this input is important for the <a href="#structural-directive-shorthand">shorthand syntax</a>. The directive will instantiate its <code>&lt;ng-template&gt;</code> with a template context providing the selected data.</p>
<p>The following is an example of using this directive directly on an <code>&lt;ng-template&gt;</code> would look like:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> select</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> let-data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [selectFrom]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"source"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;The data is: {{ data }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>The structural directive can wait for the data to become available and then render its <code>&lt;ng-template&gt;</code>.</p>

    <div class="docs-alert docs-alert-helpful">
    <p><strong>HELPFUL:</strong> Note that Angular's <code>&lt;ng-template&gt;</code> element defines a template that doesn't render anything by default, if you just wrap elements in an <code>&lt;ng-template&gt;</code> without applying a structural directive those elements will not be rendered.</p>

    </div>
    <p>For more information, see the <a href="api/core/ng-template">ng-template API</a> documentation.</p>

  <h2 id="structural-directive-shorthand">
    <a href="#structural-directive-shorthand" class="docs-anchor" tabindex="-1" aria-label="Link to Structural directive shorthand">Structural directive shorthand</a>
  </h2>
  <p>Angular supports a shorthand syntax for structural directives which avoids the need to explicitly author an <code>&lt;ng-template&gt;</code> element.</p>
<p>Structural directives can be applied directly on an element by prefixing the directive attribute selector with an asterisk (<code>*</code>), such as <code>*select</code>. Angular transforms the asterisk in front of a structural directive into an <code>&lt;ng-template&gt;</code> that hosts the directive and surrounds the element and its descendants.</p>
<p>You can use this with <code>SelectDirective</code> as follows:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"let data from source"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;The data is: {{data}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>This example shows the flexibility of structural directive shorthand syntax, which is sometimes called <em>microsyntax</em>.</p>
<p>When used in this way, only the structural directive and its bindings are applied to the <code>&lt;ng-template&gt;</code>. Any other attributes or bindings on the <code>&lt;p&gt;</code> tag are left alone. For example, these two forms are equivalent:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- Shorthand syntax: --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"data-view"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> *select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"let data from source"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;The data is: {{data}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">&lt;!-- Long-form syntax: --&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> select</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> let-data</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [selectFrom]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"source"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"data-view"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;The data is: {{data}}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">ng-template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>Shorthand syntax is expanded through a set of conventions. A more thorough <a href="#structural-directive-syntax-reference">grammar</a> is defined below, but in the above example, this transformation can be explained as follows:</p>
<p>The first part of the <code>*select</code> expression is <code>let data</code>, which declares a template variable <code>data</code>. Since no assignment follows, the template variable is bound to the template context property <code>$implicit</code>.</p>
<p>The second piece of syntax is a key-expression pair, <code>from source</code>. <code>from</code> is a binding key and <code>source</code> is a regular template expression. Binding keys are mapped to properties by transforming them to PascalCase and prepending the structural directive selector. The <code>from</code> key is mapped to <code>selectFrom</code>, which is then bound to the expression <code>source</code>. This is why many structural directives will have inputs that are all prefixed with the structural directive's selector.</p>

  <h2 id="one-structural-directive-per-element">
    <a href="#one-structural-directive-per-element" class="docs-anchor" tabindex="-1" aria-label="Link to One structural directive per element">One structural directive per element</a>
  </h2>
  <p>You can only apply one structural directive per element when using the shorthand syntax. This is because there is only one <code>&lt;ng-template&gt;</code> element onto which that directive gets unwrapped. Multiple directives would require multiple nested <code>&lt;ng-template&gt;</code>, and it's unclear which directive should be first. <code>&lt;ng-container&gt;</code> can be used when to create wrapper layers when multiple structural directives need to be applied around the same physical DOM element or component, which allows the user to define the nested structure.</p>

  <h2 id="creating-a-structural-directive">
    <a href="#creating-a-structural-directive" class="docs-anchor" tabindex="-1" aria-label="Link to Creating a structural directive">Creating a structural directive</a>
  </h2>
  <p>This section guides you through creating the <code>SelectDirective</code>.</p>

    <ol class="docs-steps">
      
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="generate-the-directive">
    <a href="#generate-the-directive" class="docs-anchor" tabindex="-1" aria-label="Link to Generate the directive">Generate the directive</a>
  </h3>
  
      <p>Using the Angular CLI, run the following command, where <code>select</code> is the name of the directive:</p>
<div class="docs-code shell">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> directive</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> select</span></span></code></pre>
  </div><p>Angular creates the directive class and specifies the CSS selector, <code>[select]</code>, that identifies the directive in a template.</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="make-the-directive-structural">
    <a href="#make-the-directive-structural" class="docs-anchor" tabindex="-1" aria-label="Link to Make the directive structural">Make the directive structural</a>
  </h3>
  
      <p>Import <a href="/api/core/TemplateRef"><code>TemplateRef</code></a>, and <a href="/api/core/ViewContainerRef"><code>ViewContainerRef</code></a>. Inject <a href="/api/core/TemplateRef"><code>TemplateRef</code></a> and <a href="/api/core/ViewContainerRef"><code>ViewContainerRef</code></a> in the directive as private properties.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {<a href="/api/core/Directive">Directive</a>, TemplateRef, ViewContainerRef} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Directive">Directive</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'[select]'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectDirective</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> templateRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(<a href="/api/core/TemplateRef">TemplateRef</a>);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> viewContainerRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> inject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(<a href="/api/core/ViewContainerRef">ViewContainerRef</a>);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-the-selectfrom-input">
    <a href="#add-the-selectfrom-input" class="docs-anchor" tabindex="-1" aria-label="Link to Add the 'selectFrom' input">Add the 'selectFrom' input</a>
  </h3>
  
      <p>Add a <code>selectFrom</code> <a href="/api/core/input"><code>input()</code></a> property.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectDirective</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  selectFrom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> <a href="/api/core/input">input</a>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="add-the-business-logic">
    <a href="#add-the-business-logic" class="docs-anchor" tabindex="-1" aria-label="Link to Add the business logic">Add the business logic</a>
  </h3>
  
      <p>With <code>SelectDirective</code> now scaffolded as a structural directive with its input, you can now add the logic to fetch the data and render the template with it:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectDirective</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngOnInit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.selectFrom.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.viewContainerRef.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createEmbeddedView</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.templateRef, {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // Create the embedded view with a context object that contains</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">      // the data via the key `$implicit`.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      $implicit: data,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
    </li>
    
    </ol>
    <p>That's it - <code>SelectDirective</code> is up and running. A follow-up step might be to <a href="#typing-the-directives-context">add template type-checking support</a>.</p>

  <h2 id="structural-directive-syntax-reference">
    <a href="#structural-directive-syntax-reference" class="docs-anchor" tabindex="-1" aria-label="Link to Structural directive syntax reference">Structural directive syntax reference</a>
  </h2>
  <p>When you write your own structural directives, use the following syntax:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">:prefix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"( :let | :expression ) (';' | ',')? ( :let | :as | :keyExp )*"</span></span></code></pre>
  </div><p>The following patterns describe each portion of the structural directive grammar:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> = :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "as"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> :local </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">";"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">keyExp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">key </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">":"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">expression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"as"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> :local)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ";"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">let </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> "let"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">local </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"="</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> :export</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ";"</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?</span></span></code></pre>
  </div>
  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Keyword</th>
<th align="left">Details</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>prefix</code></td>
<td align="left">HTML attribute key</td>
</tr>
<tr>
<td align="left"><code>key</code></td>
<td align="left">HTML attribute key</td>
</tr>
<tr>
<td align="left"><code>local</code></td>
<td align="left">Local variable name used in the template</td>
</tr>
<tr>
<td align="left"><code>export</code></td>
<td align="left">Value exported by the directive under a given name</td>
</tr>
<tr>
<td align="left"><code>expression</code></td>
<td align="left">Standard Angular expression</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="how-angular-translates-shorthand">
    <a href="#how-angular-translates-shorthand" class="docs-anchor" tabindex="-1" aria-label="Link to How Angular translates shorthand">How Angular translates shorthand</a>
  </h3>
  <p>Angular translates structural directive shorthand into the normal binding syntax as follows:</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Shorthand</th>
<th align="left">Translation</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>prefix</code> and naked <code>expression</code></td>
<td align="left"><code>[prefix]=&quot;expression&quot;</code></td>
</tr>
<tr>
<td align="left"><code>keyExp</code></td>
<td align="left"><code>[prefixKey]=&quot;expression&quot;</code> (The <code>prefix</code> is added to the <code>key</code>)</td>
</tr>
<tr>
<td align="left"><code>let local</code></td>
<td align="left"><code>let-local=&quot;export&quot;</code></td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="shorthand-examples">
    <a href="#shorthand-examples" class="docs-anchor" tabindex="-1" aria-label="Link to Shorthand examples">Shorthand examples</a>
  </h3>
  <p>The following table provides shorthand examples:</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Shorthand</th>
<th align="left">How Angular interprets the syntax</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>*myDir=&quot;let item of [1,2,3]&quot;</code></td>
<td align="left"><code>&lt;ng-template myDir let-item [myDirOf]=&quot;[1, 2, 3]&quot;&gt;</code></td>
</tr>
<tr>
<td align="left"><code>*myDir=&quot;let item of [1,2,3] as items; trackBy: myTrack; index as i&quot;</code></td>
<td align="left"><code>&lt;ng-template myDir let-item [myDirOf]=&quot;[1,2,3]&quot; let-items=&quot;myDirOf&quot; [myDirTrackBy]=&quot;myTrack&quot; let-i=&quot;index&quot;&gt;</code></td>
</tr>
<tr>
<td align="left"><code>*ngComponentOutlet=&quot;componentClass&quot;;</code></td>
<td align="left"><code>&lt;ng-template [ngComponentOutlet]=&quot;componentClass&quot;&gt;</code></td>
</tr>
<tr>
<td align="left"><code>*ngComponentOutlet=&quot;componentClass; inputs: myInputs&quot;;</code></td>
<td align="left"><code>&lt;ng-template [ngComponentOutlet]=&quot;componentClass&quot; [ngComponentOutletInputs]=&quot;myInputs&quot;&gt;</code></td>
</tr>
<tr>
<td align="left"><code>*myDir=&quot;exp as value&quot;</code></td>
<td align="left"><code>&lt;ng-template [myDir]=&quot;exp&quot; let-value=&quot;myDir&quot;&gt;</code></td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h2 id="improving-template-type-checking-for-custom-directives">
    <a href="#improving-template-type-checking-for-custom-directives" class="docs-anchor" tabindex="-1" aria-label="Link to Improving template type checking for custom directives">Improving template type checking for custom directives</a>
  </h2>
  <p>You can improve template type checking for custom directives by adding template guards to your directive definition.
These guards help the Angular template type checker find mistakes in the template at compile time, which can avoid runtime errors.
Two different types of guards are possible:</p>

  <ul class="docs-list">
    <li><code>ngTemplateGuard_(input)</code> lets you control how an input expression should be narrowed based on the type of a specific input.</li>
<li><code>ngTemplateContextGuard</code> is used to determine the type of the context object for the template, based on the type of the directive itself.</li>

  </ul>
  <p>This section provides examples of both kinds of guards.
For more information, see <a href="tools/cli/template-typecheck" title="Template type-checking guide">Template type checking</a>.</p>

  <h3 id="type-narrowing-with-template-guards">
    <a href="#type-narrowing-with-template-guards" class="docs-anchor" tabindex="-1" aria-label="Link to Type narrowing with template guards">Type narrowing with template guards</a>
  </h3>
  <p>A structural directive in a template controls whether that template is rendered at run time. Some structural directives want to perform type narrowing based on the type of input expression.</p>
<p>There are two narrowings which are possible with input guards:</p>

  <ul class="docs-list">
    <li>Narrowing the input expression based on a TypeScript type assertion function.</li>
<li>Narrowing the input expression based on its truthiness.</li>

  </ul>
  <p>To narrow the input expression by defining a type assertion function:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This directive only renders its template if the actor is a user.</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// You want to assert that within the template, the type of the `actor`</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// expression is narrowed to `User`.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Directive">Directive</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ActorIsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  actor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/input">input</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Robot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngTemplateGuard_actor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ActorIsUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">expr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Robot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> expr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // The return statement is unnecessary in practice, but included to</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // prevent TypeScript errors.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>Type-checking will behave within the template as if the <code>ngTemplateGuard_actor</code> has been asserted on the expression bound to the input.</p>
<p>Some directives only render their templates when an input is truthy. It's not possible to capture the full semantics of truthiness in a type assertion function, so instead a literal type of <code>&#39;binding&#39;</code> can be used to signal to the template type-checker that the binding expression itself should be used as the guard:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Directive">Directive</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> CustomIf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  condition</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> <a href="/api/core/input">input</a>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> ngTemplateGuard_condition</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'binding'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p>The template type-checker will behave as if the expression bound to <code>condition</code> was asserted to be truthy within the template.</p>

  <h3 id="typing-the-directives-context">
    <a href="#typing-the-directives-context" class="docs-anchor" tabindex="-1" aria-label="Link to Typing the directive's context">Typing the directive's context</a>
  </h3>
  <p>If your structural directive provides a context to the instantiated template, you can properly type it inside the template by providing a static <code>ngTemplateContextGuard</code> type assertion function. This function can use the type of the directive to derive the type of the context, which is useful when the type of the directive is generic.</p>
<p>For the <code>SelectDirective</code> described above, you can implement an <code>ngTemplateContextGuard</code> to correctly specify the data type, even if the data source is generic.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// Declare an interface for the template context:</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectTemplateContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  $implicit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Directive">Directive</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectDirective</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // The directive's generic type `T` will be inferred from the `DataSource` type</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // passed to the input.</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  selectFrom</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> <a href="/api/core/input">input</a>.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">required</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // Narrow the type of the context using the generic type of the directive.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  static</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngTemplateContextGuard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectDirective</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> SelectTemplateContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; {</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // As before the guard body is not used at runtime, and included only to avoid</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">    // TypeScript errors.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>