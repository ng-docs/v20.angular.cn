
    <header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Getting started with NgOptimizedImage</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/image-optimization.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>The <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive makes it easy to adopt performance best practices for loading images.</p>
<p>The directive ensures that the loading of the <a href="http://web.dev/lcp" target="_blank">Largest Contentful Paint (LCP)</a> image is prioritized by:</p>

  <ul class="docs-list">
    <li>Automatically setting the <code>fetchpriority</code> attribute on the <code>&lt;img&gt;</code> tag</li>
<li>Lazy loading other images by default</li>
<li>Automatically generating a preconnect link tag in the document head</li>
<li>Automatically generating a <code>srcset</code> attribute</li>
<li>Generating a <a href="https://developer.mozilla.org/docs/Web/HTML/Link_types/preload" target="_blank">preload hint</a> if app is using SSR</li>

  </ul>
  <p>In addition to optimizing the loading of the LCP image, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> enforces a number of image best practices, such as:</p>

  <ul class="docs-list">
    <li>Using <a href="https://web.dev/image-cdns/#how-image-cdns-use-urls-to-indicate-optimization-options" target="_blank">image CDN URLs to apply image optimizations</a></li>
<li>Preventing layout shift by requiring <code>width</code> and <code>height</code></li>
<li>Warning if <code>width</code> or <code>height</code> have been set incorrectly</li>
<li>Warning if the image will be visually distorted when rendered</li>

  </ul>
  <p>If you're using a background image in CSS, <a href="#how-to-migrate-your-background-image">start here</a>.</p>
<p><strong>NOTE: Although the <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive was made a stable feature in Angular version 15, it has been backported and is available as a stable feature in versions 13.4.0 and 14.3.0 as well.</strong></p>

  <h2 id="getting-started">
    <a href="#getting-started" class="docs-anchor" tabindex="-1" aria-label="Link to Getting Started">Getting Started</a>
  </h2>
  
    <ol class="docs-steps">
      
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="import-ngoptimizedimage-directive">
    <a href="#import-ngoptimizedimage-directive" class="docs-anchor" tabindex="-1" aria-label="Link to Import <code>NgOptimizedImage</code> directive">Import <code>NgOptimizedImage</code> directive</a>
  </h3>
  
      <p>Import <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive from <code>@angular/common</code>:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> { <a href="/api/common/NgOptimizedImage">NgOptimizedImage</a> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/common'</span></span></code></pre>
  </div><p>and include it into the <code>imports</code> array of a standalone component or an NgModule:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">imports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  <a href="/api/common/NgOptimizedImage">NgOptimizedImage</a>,</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // ...</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div>
    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="optional-set-up-a-loader">
    <a href="#optional-set-up-a-loader" class="docs-anchor" tabindex="-1" aria-label="Link to (Optional) Set up a Loader">(Optional) Set up a Loader</a>
  </h3>
  
      <p>An image loader is not <strong>required</strong> in order to use NgOptimizedImage, but using one with an image CDN enables powerful performance features, including automatic <code>srcset</code>s for your images.</p>
<p>A brief guide for setting up a loader can be found in the <a href="#configuring-an-image-loader-for-ngoptimizedimage">Configuring an Image Loader</a> section at the end of this page.</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="enable-the-directive">
    <a href="#enable-the-directive" class="docs-anchor" tabindex="-1" aria-label="Link to Enable the directive">Enable the directive</a>
  </h3>
  
      <p>To activate the <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive, replace your image's <code>src</code> attribute with <code>ngSrc</code>.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>If you're using a <a href="#built-in-loaders">built-in third-party loader</a>, make sure to omit the base URL path from <code>src</code>, as that will be prepended automatically by the loader.</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="mark-images-as-priority">
    <a href="#mark-images-as-priority" class="docs-anchor" tabindex="-1" aria-label="Link to Mark images as <code>priority</code>">Mark images as <code>priority</code></a>
  </h3>
  
      <p>Always mark the <a href="https://web.dev/lcp/#what-elements-are-considered" target="_blank">LCP image</a> on your page as <code>priority</code> to prioritize its loading.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> priority</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>Marking an image as <code>priority</code> applies the following optimizations:</p>

  <ul class="docs-list">
    <li>Sets <code>fetchpriority=high</code> (read more about priority hints <a href="https://web.dev/priority-hints" target="_blank">here</a>)</li>
<li>Sets <code>loading=eager</code> (read more about native lazy loading <a href="https://web.dev/browser-level-image-lazy-loading" target="_blank">here</a>)</li>
<li>Automatically generates a <a href="https://developer.mozilla.org/docs/Web/HTML/Link_types/preload" target="_blank">preload link element</a> if <a href="guide/ssr">rendering on the server</a>.</li>

  </ul>
  <p>Angular displays a warning during development if the LCP element is an image that does not have the <code>priority</code> attribute. A pageâ€™s LCP element can vary based on a number of factors - such as the dimensions of a user's screen, so a page may have multiple images that should be marked <code>priority</code>. See <a href="https://web.dev/css-web-vitals/#images-and-largest-contentful-paint-lcp" target="_blank">CSS for Web Vitals</a> for more details.</p>

    </li>
    
    <li>
      <span class="docs-step-number" aria-hidden="true"></span>
      
  <h3 id="include-width-and-height">
    <a href="#include-width-and-height" class="docs-anchor" tabindex="-1" aria-label="Link to Include Width and Height">Include Width and Height</a>
  </h3>
  
      <p>In order to prevent <a href="https://web.dev/css-web-vitals/#images-and-layout-shifts" target="_blank">image-related layout shifts</a>, NgOptimizedImage requires that you specify a height and width for your image, as follows:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>For <strong>responsive images</strong> (images which you've styled to grow and shrink relative to the viewport), the <code>width</code> and <code>height</code> attributes should be the intrinsic size of the image file. For responsive images it's also important to <a href="#responsive-images">set a value for <code>sizes</code>.</a></p>
<p>For <strong>fixed size images</strong>, the <code>width</code> and <code>height</code> attributes should reflect the desired rendered size of the image. The aspect ratio of these attributes should always match the intrinsic aspect ratio of the image.</p>
<p>NOTE: If you don't know the size of your images, consider using "fill mode" to inherit the size of the parent container, as described below.</p>

    </li>
    
    </ol>
    
  <h2 id="using-fill-mode">
    <a href="#using-fill-mode" class="docs-anchor" tabindex="-1" aria-label="Link to Using <code>fill</code> mode">Using <code>fill</code> mode</a>
  </h2>
  <p>In cases where you want to have an image fill a containing element, you can use the <code>fill</code> attribute. This is often useful when you want to achieve a "background image" behavior. It can also be helpful when you don't know the exact width and height of your image, but you do have a parent container with a known size that you'd like to fit your image into (see "object-fit" below).</p>
<p>When you add the <code>fill</code> attribute to your image, you do not need and should not include a <code>width</code> and <code>height</code>, as in this example:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>You can use the <a href="https://developer.mozilla.org/docs/Web/CSS/object-fit" target="_blank">object-fit</a> CSS property to change how the image will fill its container. If you style your image with <code>object-fit: &quot;contain&quot;</code>, the image will maintain its aspect ratio and be "letterboxed" to fit the element. If you set <code>object-fit: &quot;cover&quot;</code>, the element will retain its aspect ratio, fully fill the element, and some content may be "cropped" off.</p>
<p>See visual examples of the above at the <a href="https://developer.mozilla.org/docs/Web/CSS/object-fit" target="_blank">MDN object-fit documentation.</a></p>
<p>You can also style your image with the <a href="https://developer.mozilla.org/docs/Web/CSS/object-position" target="_blank">object-position property</a> to adjust its position within its containing element.</p>

    <div class="docs-alert docs-alert-important">
    <p><strong>IMPORTANT:</strong> For the "fill" image to render properly, its parent element <strong>must</strong> be styled with <code>position: &quot;relative&quot;</code>, <code>position: &quot;fixed&quot;</code>, or <code>position: &quot;absolute&quot;</code>.</p>

    </div>
    
  <h2 id="how-to-migrate-your-background-image">
    <a href="#how-to-migrate-your-background-image" class="docs-anchor" tabindex="-1" aria-label="Link to How to migrate your background image">How to migrate your background image</a>
  </h2>
  <p>Here's a simple step-by-step process for migrating from <code>background-image</code> to <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a>. For these steps, we'll refer to the element that has an image background as the "containing element":</p>

    <ol class="docs-ordered-list">
      <li>Remove the <code>background-image</code> style from the containing element.</li>
<li>Ensure that the containing element has <code>position: &quot;relative&quot;</code>,Â <code>position: &quot;fixed&quot;</code>, orÂ <code>position: &quot;absolute&quot;</code>.</li>
<li>Create a new image element as a child of the containing element, using <code>ngSrc</code> to enable the <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive.</li>
<li>Give that element the <code>fill</code> attribute. Do not include a <code>height</code> and <code>width</code>.</li>
<li>If you believe this image might be your <a href="https://web.dev/lcp/" target="_blank">LCP element</a>, add the <code>priority</code> attribute to the image element.</li>

    </ol>
    <p>You can adjust how the background image fills the container as described in the <a href="#using-fill-mode">Using fill mode</a> section.</p>

  <h2 id="using-placeholders">
    <a href="#using-placeholders" class="docs-anchor" tabindex="-1" aria-label="Link to Using placeholders">Using placeholders</a>
  </h2>
  
  <h3 id="automatic-placeholders">
    <a href="#automatic-placeholders" class="docs-anchor" tabindex="-1" aria-label="Link to Automatic placeholders">Automatic placeholders</a>
  </h3>
  <p>NgOptimizedImage can display an automatic low-resolution placeholder for your image if you're using a CDN or image host that provides automatic image resizing. Take advantage of this feature by adding the <code>placeholder</code> attribute to your image:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>Adding this attribute automatically requests a second, smaller version of the image using your specified image loader. This small image will be applied as a <code>background-image</code> style with a CSS blur while your image loads. If no image loader is provided, no placeholder image can be generated and an error will be thrown.</p>
<p>The default size for generated placeholders is 30px wide. You can change this size by specifying a pixel value in the <a href="/api/common/IMAGE_CONFIG"><code>IMAGE_CONFIG</code></a> provider, as seen below:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/common/IMAGE_CONFIG">IMAGE_CONFIG</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    useValue: {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      placeholderResolution: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">40</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>If you want sharp edges around your blurred placeholder, you can wrap your image in a containing <code>&lt;div&gt;</code> with the <code>overflow: hidden</code> style. As long as the <code>&lt;div&gt;</code> is the same size as the image (such as by using the <code>width: fit-content</code> style), the "fuzzy edges" of the placeholder will be hidden.</p>

  <h3 id="data-url-placeholders">
    <a href="#data-url-placeholders" class="docs-anchor" tabindex="-1" aria-label="Link to Data URL placeholders">Data URL placeholders</a>
  </h3>
  <p>You can also specify a placeholder using a base64 <a href="https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URLs" target="_blank">data URL</a> without an image loader. The data url format is <code>data:image/[imagetype];[data]</code>, where <code>[imagetype]</code> is the image format, just as <code>png</code>, and <code>[data]</code> is a base64 encoding of the image. That encoding can be done using the command line or in JavaScript. For specific commands, see <a href="https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URLs#encoding_data_into_base64_format" target="_blank">the MDN documentation</a>. An example of a data URL placeholder with truncated data is shown below:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"data:image/png;base64,iVBORw0K..."</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/&gt;</span></span></code></pre>
  </div><p>However, large data URLs  increase the size of your Angular bundles and slow down page load. If you cannot use an image loader, the Angular team recommends keeping base64 placeholder images smaller than 4KB and using them exclusively on critical images. In addition to decreasing placeholder dimensions, consider changing image formats or parameters used when saving images. At very low resolutions, these parameters can have a large effect on file size.</p>

  <h3 id="non-blurred-placeholders">
    <a href="#non-blurred-placeholders" class="docs-anchor" tabindex="-1" aria-label="Link to Non-blurred placeholders">Non-blurred placeholders</a>
  </h3>
  <p>By default, NgOptimizedImage applies a CSS blur effect to image placeholders. To render a placeholder without blur, provide a <code>placeholderConfig</code> argument with an object that includes the <code>blur</code> property, set to false. For example:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  placeholder</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  [placeholderConfig]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{blur: false}"</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/&gt;</span></span></code></pre>
  </div>
  <h2 id="adjusting-image-styling">
    <a href="#adjusting-image-styling" class="docs-anchor" tabindex="-1" aria-label="Link to Adjusting image styling">Adjusting image styling</a>
  </h2>
  <p>Depending on the image's styling, adding <code>width</code> and <code>height</code> attributes may cause the image to render differently. <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> warns you if your image styling renders the image at a distorted aspect ratio.</p>
<p>You can typically fix this by adding <code>height: auto</code> or <code>width: auto</code> to your image styles. For more information, see the <a href="https://web.dev/patterns/web-vitals-patterns/images/img-tag" target="_blank">web.dev article on the <code>&lt;img&gt;</code> tag</a>.</p>
<p>If the <code>width</code> and <code>height</code> attribute on the image are preventing you from sizing the image the way you want with CSS, consider using <code>fill</code> mode instead, and styling the image's parent element.</p>

  <h2 id="performance-features">
    <a href="#performance-features" class="docs-anchor" tabindex="-1" aria-label="Link to Performance Features">Performance Features</a>
  </h2>
  <p>NgOptimizedImage includes a number of features designed to improve loading performance in your app. These features are described in this section.</p>

  <h3 id="add-resource-hints">
    <a href="#add-resource-hints" class="docs-anchor" tabindex="-1" aria-label="Link to Add resource hints">Add resource hints</a>
  </h3>
  <p>A <a href="https://web.dev/preconnect-and-dns-prefetch" target="_blank"><code>preconnect</code> resource hint</a> for your image origin ensures that the LCP image loads as quickly as possible.</p>
<p>Preconnect links are automatically generated for domains provided as an argument to a <a href="#optional-set-up-a-loader">loader</a>. If an image origin cannot be automatically identified, and no preconnect link is detected for the LCP image, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> will warn during development. In that case, you should manually add a resource hint to <code>index.html</code>. Within the <code>&lt;head&gt;</code> of the document, add a <code>link</code> tag with <code>rel=&quot;preconnect&quot;</code>, as shown below:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"preconnect"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"https://my.cdn.origin"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> /&gt;</span></span></code></pre>
  </div><p>To disable preconnect warnings, inject the <a href="/api/common/PRECONNECT_CHECK_BLOCKLIST"><code>PRECONNECT_CHECK_BLOCKLIST</code></a> token:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/common/PRECONNECT_CHECK_BLOCKLIST">PRECONNECT_CHECK_BLOCKLIST</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, useValue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://your-domain.com'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>See more information on automatic preconnect generation <a href="#why-is-a-preconnect-element-not-being-generated-for-my-image-domain">here</a>.</p>

  <h3 id="request-images-at-the-correct-size-with-automatic-srcset">
    <a href="#request-images-at-the-correct-size-with-automatic-srcset" class="docs-anchor" tabindex="-1" aria-label="Link to Request images at the correct size with automatic <code>srcset</code>">Request images at the correct size with automatic <code>srcset</code></a>
  </h3>
  <p>Defining a <a href="https://developer.mozilla.org/docs/Web/API/HTMLImageElement/srcset" target="_blank"><code>srcset</code> attribute</a> ensures that the browser requests an image at the right size for your user's viewport, so it doesn't waste time downloading an image that's too large. <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> generates an appropriate <code>srcset</code> for the image, based on the presence and value of the <a href="https://developer.mozilla.org/docs/Web/API/HTMLImageElement/sizes" target="_blank"><code>sizes</code> attribute</a> on the image tag.</p>

  <h4 id="fixed-size-images">
    <a href="#fixed-size-images" class="docs-anchor" tabindex="-1" aria-label="Link to Fixed-size images">Fixed-size images</a>
  </h4>
  <p>If your image should be "fixed" in size  (i.e. the same size across devices, except for <a href="https://web.dev/codelab-density-descriptors/" target="_blank">pixel density</a>), there is no need to set a <code>sizes</code> attribute. A <code>srcset</code> can be generated automatically from the image's width and height attributes with no further input required.</p>
<p>Example srcset generated:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ...</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> srcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"image-400w.jpg 1x, image-800w.jpg 2x"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div>
  <h4 id="responsive-images">
    <a href="#responsive-images" class="docs-anchor" tabindex="-1" aria-label="Link to Responsive images">Responsive images</a>
  </h4>
  <p>If your image should be responsive (i.e. grow and shrink according to viewport size), then you will need to define a <a href="https://developer.mozilla.org/docs/Web/API/HTMLImageElement/sizes" target="_blank"><code>sizes</code> attribute</a> to generate the <code>srcset</code>.</p>
<p>If you haven't used <code>sizes</code> before, a good place to start is to set it based on viewport width. For example, if your CSS causes the image to fill 100% of viewport width, set <code>sizes</code> to <code>100vw</code> and the browser will select the image in the <code>srcset</code> that is closest to the viewport width (after accounting for pixel density). If your image is only likely to take up half the screen (ex: in a sidebar), set <code>sizes</code> to <code>50vw</code> to ensure the browser selects a smaller image. And so on.</p>
<p>If you find that the above does not cover your desired image behavior, see the documentation on <a href="#advanced-sizes-values">advanced sizes values</a>.</p>
<p>Note that <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> automatically prepends <code>&quot;auto&quot;</code> to the provided <code>sizes</code> value. This is an optimization that increases the accuracy of srcset selection on browsers which support <code>sizes=&quot;auto&quot;</code>, and is ignored by browsers which do not.</p>
<p>By default, the responsive breakpoints are:</p>
<p><code>[16, 32, 48, 64, 96, 128, 256, 384, 640, 750, 828, 1080, 1200, 1920, 2048, 3840]</code></p>
<p>If you would like to customize these breakpoints, you can do so using the <a href="/api/common/IMAGE_CONFIG"><code>IMAGE_CONFIG</code></a> provider:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/common/IMAGE_CONFIG">IMAGE_CONFIG</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    useValue: {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      breakpoints: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">48</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">96</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">384</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">640</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">750</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">828</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1920</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>If you would like to manually define a <code>srcset</code> attribute, you can provide your own using the <code>ngSrcset</code> attribute:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hero.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"100w, 200w, 300w"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>If the <code>ngSrcset</code> attribute is present, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> generates and sets the <code>srcset</code> based on the sizes included. Do not include image file names in <code>ngSrcset</code> - the directive infers this information from <code>ngSrc</code>. The directive supports both width descriptors (e.g. <code>100w</code>) and density descriptors (e.g. <code>1x</code>).</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"hero.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"100w, 200w, 300w"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sizes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"50vw"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div>
  <h3 id="disabling-automatic-srcset-generation">
    <a href="#disabling-automatic-srcset-generation" class="docs-anchor" tabindex="-1" aria-label="Link to Disabling automatic srcset generation">Disabling automatic srcset generation</a>
  </h3>
  <p>To disable srcset generation for a single image, you can add the <code>disableOptimizedSrcset</code> attribute on the image:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"about.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> disableOptimizedSrcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div>
  <h3 id="disabling-image-lazy-loading">
    <a href="#disabling-image-lazy-loading" class="docs-anchor" tabindex="-1" aria-label="Link to Disabling image lazy loading">Disabling image lazy loading</a>
  </h3>
  <p>By default, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> sets <code>loading=lazy</code> for all images that are not marked <code>priority</code>. You can disable this behavior for non-priority images by setting the <code>loading</code> attribute. This attribute accepts values: <code>eager</code>, <code>auto</code>, and <code>lazy</code>. <a href="https://developer.mozilla.org/docs/Web/API/HTMLImageElement/loading#value" target="_blank">See the documentation for the standard image <code>loading</code> attribute for details</a>.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"eager"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div>
  <h3 id="advanced-sizes-values">
    <a href="#advanced-sizes-values" class="docs-anchor" tabindex="-1" aria-label="Link to Advanced 'sizes' values">Advanced 'sizes' values</a>
  </h3>
  <p>You may want to have images displayed at varying widths on differently-sized screens. A common example of this pattern is a grid- or column-based layout that renders a single column on mobile devices, and two columns on larger devices. You can capture this behavior in the <code>sizes</code> attribute, using a "media query" syntax, such as the following:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"cat.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"400"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"200"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> sizes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"(max-width: 768px) 100vw, 50vw"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div><p>The <code>sizes</code> attribute in the above example says "I expect this image to be 100 percent of the screen width on devices under 768px wide. Otherwise, I expect it to be 50 percent of the screen width.</p>
<p>For additional information about the <code>sizes</code> attribute, see <a href="https://web.dev/learn/design/responsive-images/#sizes" target="_blank">web.dev</a> or <a href="https://developer.mozilla.org/docs/Web/API/HTMLImageElement/sizes" target="_blank">mdn</a>.</p>

  <h2 id="configuring-an-image-loader-for-ngoptimizedimage">
    <a href="#configuring-an-image-loader-for-ngoptimizedimage" class="docs-anchor" tabindex="-1" aria-label="Link to Configuring an image loader for <code>NgOptimizedImage</code>">Configuring an image loader for <code>NgOptimizedImage</code></a>
  </h2>
  <p>A "loader" is a function that generates an <a href="https://web.dev/image-cdns/#how-image-cdns-use-urls-to-indicate-optimization-options" target="_blank">image transformation URL</a> for a given image file. When appropriate, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> sets the size, format, and image quality transformations for an image.</p>
<p><a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> provides both a generic loader that applies no transformations, as well as loaders for various third-party image services. It also supports writing your own custom loader.</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Loader type</th>
<th align="left">Behavior</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">Generic loader</td>
<td align="left">The URL returned by the generic loader will always match the value of <code>src</code>. In other words, this loader applies no transformations. Sites that use Angular to serve images are the primary intended use case for this loader.</td>
</tr>
<tr>
<td align="left">Loaders for third-party image services</td>
<td align="left">The URL returned by the loaders for third-party image services will follow API conventions used by that particular image service.</td>
</tr>
<tr>
<td align="left">Custom loaders</td>
<td align="left">A custom loader's behavior is defined by its developer. You should use a custom loader if your image service isn't supported by the loaders that come preconfigured with <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a>.</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>Based on the image services commonly used with Angular applications, <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> provides loaders preconfigured to work with the following image services:</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">Image Service</th>
<th align="left">Angular API</th>
<th align="left">Documentation</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">Cloudflare Image Resizing</td>
<td align="left"><a href="/api/common/provideCloudflareLoader"><code>provideCloudflareLoader</code></a></td>
<td align="left"><a href="https://developers.cloudflare.com/images/image-resizing/" target="_blank">Documentation</a></td>
</tr>
<tr>
<td align="left">Cloudinary</td>
<td align="left"><a href="/api/common/provideCloudinaryLoader"><code>provideCloudinaryLoader</code></a></td>
<td align="left"><a href="https://cloudinary.com/documentation/resizing_and_cropping" target="_blank">Documentation</a></td>
</tr>
<tr>
<td align="left">ImageKit</td>
<td align="left"><a href="/api/common/provideImageKitLoader"><code>provideImageKitLoader</code></a></td>
<td align="left"><a href="https://docs.imagekit.io/" target="_blank">Documentation</a></td>
</tr>
<tr>
<td align="left">Imgix</td>
<td align="left"><a href="/api/common/provideImgixLoader"><code>provideImgixLoader</code></a></td>
<td align="left"><a href="https://docs.imgix.com/" target="_blank">Documentation</a></td>
</tr>
<tr>
<td align="left">Netlify</td>
<td align="left"><a href="/api/common/provideNetlifyLoader"><code>provideNetlifyLoader</code></a></td>
<td align="left"><a href="https://docs.netlify.com/image-cdn/overview/" target="_blank">Documentation</a></td>
</tr>

      </tbody>
    </table>
  </div>
  <p>To use the <strong>generic loader</strong> no additional code changes are necessary. This is the default behavior.</p>

  <h3 id="built-in-loaders">
    <a href="#built-in-loaders" class="docs-anchor" tabindex="-1" aria-label="Link to Built-in Loaders">Built-in Loaders</a>
  </h3>
  <p>To use an existing loader for a <strong>third-party image service</strong>, add the provider factory for your chosen service to the <code>providers</code> array. In the example below, the Imgix loader is used:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/common/provideImgixLoader">provideImgixLoader</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://my.base.url/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>The base URL for your image assets should be passed to the provider factory as an argument. For most sites, this base URL should match one of the following patterns:</p>

  <ul class="docs-list">
    <li><a href="https://yoursite.yourcdn.com" target="_blank">https://yoursite.yourcdn.com</a></li>
<li><a href="https://subdomain.yoursite.com" target="_blank">https://subdomain.yoursite.com</a></li>
<li><a href="https://subdomain.yourcdn.com/yoursite" target="_blank">https://subdomain.yourcdn.com/yoursite</a></li>

  </ul>
  <p>You can learn more about the base URL structure in the docs of a corresponding CDN provider.</p>

  <h3 id="custom-loaders">
    <a href="#custom-loaders" class="docs-anchor" tabindex="-1" aria-label="Link to Custom Loaders">Custom Loaders</a>
  </h3>
  <p>To use a <strong>custom loader</strong>, provide your loader function as a value for the <a href="/api/common/IMAGE_LOADER"><code>IMAGE_LOADER</code></a> DI token. In the example below, the custom loader function returns a URL starting with <code>https://example.com</code> that includes <code>src</code> and <code>width</code> as URL parameters.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"><a href="/api/common/IMAGE_LOADER">IMAGE_LOADER</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    useValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/ImageLoaderConfig">ImageLoaderConfig</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">      return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `https://example.com/images?src=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}&amp;width=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">width</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  },</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>A loader function for the <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive takes an object with the <a href="/api/common/ImageLoaderConfig"><code>ImageLoaderConfig</code></a> type (from <code>@angular/common</code>) as its argument and returns the absolute URL of the image asset. The <a href="/api/common/ImageLoaderConfig"><code>ImageLoaderConfig</code></a> object contains the <code>src</code> property, and optional <code>width</code> and <code>loaderParams</code> properties.</p>

    <div class="docs-alert docs-alert-note">
    <p><strong>NOTE:</strong> even though the <code>width</code> property may not always be present, a custom loader must use it to support requesting images at various widths in order for <code>ngSrcset</code> to work properly.</p>

    </div>
    
  <h3 id="the-loaderparams-property">
    <a href="#the-loaderparams-property" class="docs-anchor" tabindex="-1" aria-label="Link to The <code>loaderParams</code> Property">The <code>loaderParams</code> Property</a>
  </h3>
  <p>There is an additional attribute supported by the <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a> directive, called <code>loaderParams</code>, which is specifically designed to support the use of custom loaders. The <code>loaderParams</code> attribute takes an object with any properties as a value, and does not do anything on its own. The data in <code>loaderParams</code> is added to the <a href="/api/common/ImageLoaderConfig"><code>ImageLoaderConfig</code></a> object passed to your custom loader, and can be used to control the behavior of the loader.</p>
<p>A common use for <code>loaderParams</code> is controlling advanced image CDN features.</p>

  <h3 id="example-custom-loader">
    <a href="#example-custom-loader" class="docs-anchor" tabindex="-1" aria-label="Link to Example custom loader">Example custom loader</a>
  </h3>
  <p>The following shows an example of a custom loader function. This example function concatenates <code>src</code> and <code>width</code>, and uses <code>loaderParams</code> to control a custom CDN feature for rounded corners:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> myCustomLoader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/common/ImageLoaderConfig">ImageLoaderConfig</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> `https://example.com/images/${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">src</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}?`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> queryParams </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> [];</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (config.width) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    queryParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`w=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">width</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (config.loaderParams?.roundedCorners) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    queryParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'mask=corners&amp;corner-radius=5'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> queryParams.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'&amp;'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">};</span></span></code></pre>
  </div><p>Note that in the above example, we've invented the 'roundedCorners' property name to control a feature of our custom loader. We could then use this feature when creating an image, as follows:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ngSrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"profile.jpg"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"300"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"300"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [loaderParams]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"{roundedCorners: true}"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre>
  </div>
  <h2 id="frequently-asked-questions">
    <a href="#frequently-asked-questions" class="docs-anchor" tabindex="-1" aria-label="Link to Frequently Asked Questions">Frequently Asked Questions</a>
  </h2>
  
  <h3 id="does-ngoptimizedimage-support-the-background-image-css-property">
    <a href="#does-ngoptimizedimage-support-the-background-image-css-property" class="docs-anchor" tabindex="-1" aria-label="Link to Does NgOptimizedImage support the <code>background-image</code> css property?">Does NgOptimizedImage support the <code>background-image</code> css property?</a>
  </h3>
  <p>The NgOptimizedImage does not directly support the <code>background-image</code> css property, but it is designed to easily accommodate the use case of having an image as the background of another element.</p>
<p>For a step-by-step process for migration from <code>background-image</code> to <a href="/api/common/NgOptimizedImage"><code>NgOptimizedImage</code></a>, see the <a href="#how-to-migrate-your-background-image">How to migrate your background image</a> section above.</p>

  <h3 id="why-cant-i-use-src-with-ngoptimizedimage">
    <a href="#why-cant-i-use-src-with-ngoptimizedimage" class="docs-anchor" tabindex="-1" aria-label="Link to Why can't I use <code>src</code> with <code>NgOptimizedImage</code>?">Why can't I use <code>src</code> with <code>NgOptimizedImage</code>?</a>
  </h3>
  <p>The <code>ngSrc</code> attribute was chosen as the trigger for NgOptimizedImage due to technical considerations around how images are loaded by the browser. NgOptimizedImage makes programmatic changes to the <code>loading</code> attribute -- if the browser sees the <code>src</code> attribute before those changes are made, it will begin eagerly downloading the image file, and the loading changes will be ignored.</p>

  <h3 id="why-is-a-preconnect-element-not-being-generated-for-my-image-domain">
    <a href="#why-is-a-preconnect-element-not-being-generated-for-my-image-domain" class="docs-anchor" tabindex="-1" aria-label="Link to Why is a preconnect element not being generated for my image domain?">Why is a preconnect element not being generated for my image domain?</a>
  </h3>
  <p>Preconnect generation is performed based on static analysis of your application. That means that the image domain must be directly included in the loader parameter, as in the following example:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">: [</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/common/provideImgixLoader">provideImgixLoader</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'https://my.base.url/'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">),</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">],</span></span></code></pre>
  </div><p>If you use a variable to pass the domain string to the loader, or you're not using a loader, the static analysis will not be able to identify the domain, and no preconnect link will be generated. In this case you should manually add a preconnect link to the document head, as <a href="#add-resource-hints">described above</a>.</p>

  <h3 id="can-i-use-two-different-image-domains-in-the-same-page">
    <a href="#can-i-use-two-different-image-domains-in-the-same-page" class="docs-anchor" tabindex="-1" aria-label="Link to Can I use two different image domains in the same page?">Can I use two different image domains in the same page?</a>
  </h3>
  <p>The <a href="#configuring-an-image-loader-for-ngoptimizedimage">image loaders</a> provider pattern is designed to be as simple as possible for the common use case of having only a single image CDN used within a component. However, it's still very possible to manage multiple image CDNs using a single provider.</p>
<p>To do this, we recommend writing a <a href="#custom-loaders">custom image loader</a> which uses the <a href="#the-loaderparams-property"><code>loaderParams</code> property</a> to pass a flag that specifies which image CDN should be used, and then invokes the appropriate loader based on that flag.</p>

  <h3 id="can-you-add-a-new-built-in-loader-for-my-preferred-cdn">
    <a href="#can-you-add-a-new-built-in-loader-for-my-preferred-cdn" class="docs-anchor" tabindex="-1" aria-label="Link to Can you add a new built-in loader for my preferred CDN?">Can you add a new built-in loader for my preferred CDN?</a>
  </h3>
  <p>For maintenance reasons, we don't currently plan to support additional built-in loaders in the Angular repository. Instead, we encourage developers to publish any additional image loaders as third-party packages.</p>

  <h3 id="can-i-use-this-with-the-picture-tag">
    <a href="#can-i-use-this-with-the-picture-tag" class="docs-anchor" tabindex="-1" aria-label="Link to Can I use this with the <code>&lt;picture&gt;</code> tag">Can I use this with the <code>&lt;picture&gt;</code> tag</a>
  </h3>
  <p>No, but this is on our roadmap, so stay tuned.</p>
<p>If you're waiting on this feature, please upvote the Github issue <a href="https://github.com/angular/angular/issues/56594" target="_blank">here</a>.</p>

  <h3 id="how-do-i-find-my-lcp-image-with-chrome-devtools">
    <a href="#how-do-i-find-my-lcp-image-with-chrome-devtools" class="docs-anchor" tabindex="-1" aria-label="Link to How do I find my LCP image with Chrome DevTools?">How do I find my LCP image with Chrome DevTools?</a>
  </h3>
  
    <ol class="docs-ordered-list">
      <li><p>Using the performance tab of the Chrome DevTools, click on the "start profiling and reload page" button on the top left. It looks like a page refresh icon.</p>
</li>
<li><p>This will trigger a profiling snapshot of your Angular application.</p>
</li>
<li><p>Once the profiling result is available, select "LCP" in the timings section.</p>
</li>
<li><p>A summary entry should appear in the panel at the bottom. You can find the LCP element in the row for "related node".  Clicking on it will reveal the element in the Elements panel.</p>
</li>

    </ol>
    <img alt="LCP in the Chrome DevTools" src="assets/images/guide/image-optimization/devtools-lcp.png">


    <div class="docs-alert docs-alert-note">
    <p><strong>NOTE:</strong> This only identifies the LCP element within the viewport of the page you are testing. It is also recommended to use mobile emulation to identify the LCP element for smaller screens.</p>

    </div>
    