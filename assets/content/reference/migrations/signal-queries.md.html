
    <header class="docs-header">
      <docs-breadcrumb></docs-breadcrumb>

      
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Migration to signal queries</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/reference/migrations/signal-queries.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>
    </header>
    <p>Angular introduced improved APIs for queries that are considered
production ready as of v19.
Read more about signal queries and their benefits in the <a href="guide/signals/queries">dedicated guide</a>.</p>
<p>To support existing teams that would like to use signal queries, the Angular team
provides an automated migration that converts existing decorator query fields to the new API.</p>
<p>Run the schematic using the following command:</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ng</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> generate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> @angular/core:signal-queries-migration</span></span></code></pre>
  </div><p>Alternatively, the migration is available as a <a href="https://code.visualstudio.com/docs/typescript/typescript-refactoring#_refactoring" target="_blank">code refactor action</a> in VSCode.
Install the latest version of the VSCode extension and click onto e.g. a <a href="/api/core/ViewChild"><code>@ViewChild</code></a> field.
See more details in the section <a href="#vscode-extension">below</a>.</p>

  <h2 id="what-does-the-migration-change">
    <a href="#what-does-the-migration-change" class="docs-anchor" tabindex="-1" aria-label="Link to What does the migration change?">What does the migration change?</a>
  </h2>
  
    <ol class="docs-ordered-list">
      <li><a href="/api/core/ViewChild"><code>@ViewChild()</code></a>, <a href="/api/core/ViewChildren"><code>@ViewChildren</code></a>, <a href="/api/core/ContentChild"><code>@ContentChild</code></a> and <a href="/api/core/ContentChildren"><code>@ContentChildren</code></a> class members
are updated to their signal equivalents.</li>
<li>References in your application to migrated queries are updated to call the signal.
  <ul class="docs-list">
    <li>This includes references in templates, host bindings or TypeScript code.</li>

  </ul>
  </li>

    </ol>
    <p><strong>Before</strong></p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {<a href="/api/core/Component">Component</a>, ContentChild} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Has ref: {{someRef ? 'Yes' : 'No'}}`</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/ContentChild">ContentChild</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'someRef'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/ElementRef">ElementRef</a></span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">undefined</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  someMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.ref) {</span></span><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.ref.nativeElement;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div><p><strong>After</strong></p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {<a href="/api/core/Component">Component</a>, contentChild} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/Component">Component</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`Has ref: {{someRef() ? 'Yes' : 'No'}}`</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> MyComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  readonly</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/contentChild">contentChild</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/ElementRef">ElementRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'someRef'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  someMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">() {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (ref) {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      ref.nativeElement;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre>
  </div>
  <h2 id="configuration-options">
    <a href="#configuration-options" class="docs-anchor" tabindex="-1" aria-label="Link to Configuration options">Configuration options</a>
  </h2>
  <p>The migration supports a few options for fine tuning the migration to your specific needs.</p>

  <h3 id="--path">
    <a href="#--path" class="docs-anchor" tabindex="-1" aria-label="Link to <code>--path</code>"><code>--path</code></a>
  </h3>
  <p>By default, the migration will update your whole Angular CLI workspace.
You can limit the migration to a specific sub-directory using this option.</p>

  <h3 id="--best-effort-mode">
    <a href="#--best-effort-mode" class="docs-anchor" tabindex="-1" aria-label="Link to <code>--best-effort-mode</code>"><code>--best-effort-mode</code></a>
  </h3>
  <p>By default, the migration skips queries that cannot be safely migrated.
The migration tries to refactor code as safely as possible.</p>
<p>When the <code>--best-effort-mode</code> flag is enabled, the migration eagerly
tries to migrate as much as possible, even if it could break your build.</p>

  <h3 id="--insert-todos">
    <a href="#--insert-todos" class="docs-anchor" tabindex="-1" aria-label="Link to <code>--insert-todos</code>"><code>--insert-todos</code></a>
  </h3>
  <p>When enabled, the migration will add TODOs to queries that couldn't be migrated.
The TODOs will include reasoning on why queries were skipped. E.g.</p>
<div class="docs-code">
    
    <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// TODO: Skipped for migration because:</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">//  Your application code writes to the query. This prevents migration.</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/ViewChild">ViewChild</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'ref'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">) ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> <a href="/api/core/ElementRef">ElementRef</a>;</span></span></code></pre>
  </div>
  <h3 id="--analysis-dir">
    <a href="#--analysis-dir" class="docs-anchor" tabindex="-1" aria-label="Link to <code>--analysis-dir</code>"><code>--analysis-dir</code></a>
  </h3>
  <p>In large projects you may use this option to reduce the amount of files being analyzed.
By default, the migration analyzes the whole workspace, regardless of the <code>--path</code> option, in
order to update all references affected by a query declaration being migrated.</p>
<p>With this option, you can limit analysis to a sub-folder. Note that this means that any
references outside this directory are silently skipped, potentially breaking your build.</p>

  <h2 id="vscode-extension">
    <a href="#vscode-extension" class="docs-anchor" tabindex="-1" aria-label="Link to VSCode extension">VSCode extension</a>
  </h2>
  <p>
  <img src="assets/images/migrations/signal-queries-vscode.png" alt="Screenshot of the VSCode extension and clicking on an `@ViewChild` field" title="Screenshot of the VSCode extension and clicking on an `@ViewChild` field." class="docs-image">
  </p>
<p>The migration is available as a <a href="https://code.visualstudio.com/docs/typescript/typescript-refactoring#_refactoring" target="_blank">code refactor action</a> in VSCode.</p>
<p>To make use of the migration via VSCode, install the latest version of the VSCode extension and either click:</p>

  <ul class="docs-list">
    <li>on a <a href="/api/core/ViewChild"><code>@ViewChild</code></a>, <a href="/api/core/ViewChildren"><code>@ViewChildren</code></a>, <a href="/api/core/ContentChild"><code>@ContentChild</code></a>, or <a href="/api/core/ContentChildren"><code>@ContentChildren</code></a> field.</li>
<li>on a directive/component</li>

  </ul>
  <p>Then, wait for the yellow lightbulb VSCode refactoring button to appear.
Via this button you can then select the signal queries migration.</p>
