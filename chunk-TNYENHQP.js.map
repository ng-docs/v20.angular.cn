{
  "version": 3,
  "sources": ["src/assets/tutorials/playground/routes.json", "src/app/features/playground/playground.component.ts", "src/app/features/playground/playground.component.html"],
  "sourcesContent": ["{\"templates\":[{\"path\":\"playground/0-hello-world\",\"label\":\"Hello world\"},{\"path\":\"playground/1-signals\",\"label\":\"Signals\"},{\"path\":\"playground/3-minigame\",\"label\":\"Minigame\"},{\"path\":\"playground/2-control-flow\",\"label\":\"Control flow\"}],\"defaultTemplate\":{\"path\":\"playground/0-hello-world\",\"label\":\"Hello world\"},\"starterTemplate\":{\"path\":\"playground/2-control-flow\",\"label\":\"Control flow\"}}", "/*!\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {isPlatformServer, NgComponentOutlet} from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DestroyRef,\n  EnvironmentInjector,\n  PLATFORM_ID,\n  Type,\n  inject,\n} from '@angular/core';\nimport {takeUntilDestroyed} from '@angular/core/rxjs-interop';\nimport {CdkMenu, CdkMenuItem, CdkMenuTrigger} from '@angular/cdk/menu';\nimport {IconComponent, PlaygroundTemplate} from '@angular/docs';\nimport {forkJoin, switchMap, tap} from 'rxjs';\n\nimport {injectAsync} from '../../core/services/inject-async';\nimport {injectNodeRuntimeSandbox} from '../../editor/index';\nimport type {NodeRuntimeSandbox} from '../../editor/node-runtime-sandbox.service';\n\nimport PLAYGROUND_ROUTE_DATA_JSON from '../../../../src/assets/tutorials/playground/routes.json';\n\n@Component({\n  selector: 'adev-playground',\n  imports: [NgComponentOutlet, IconComponent, CdkMenu, CdkMenuItem, CdkMenuTrigger],\n  templateUrl: './playground.component.html',\n  styleUrls: [\n    './playground.component.scss',\n    '../tutorial/tutorial-navigation.scss',\n    '../tutorial/tutorial-navigation-list.scss',\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport default class PlaygroundComponent {\n  private readonly changeDetectorRef = inject(ChangeDetectorRef);\n  private readonly environmentInjector = inject(EnvironmentInjector);\n  private readonly destroyRef = inject(DestroyRef);\n  private readonly isServer = isPlatformServer(inject(PLATFORM_ID));\n\n  readonly templates = PLAYGROUND_ROUTE_DATA_JSON.templates;\n  readonly defaultTemplate = PLAYGROUND_ROUTE_DATA_JSON.defaultTemplate;\n  readonly starterTemplate = PLAYGROUND_ROUTE_DATA_JSON.starterTemplate;\n\n  protected nodeRuntimeSandbox?: NodeRuntimeSandbox;\n  protected embeddedEditorComponent?: Type<unknown>;\n  protected selectedTemplate: PlaygroundTemplate = this.defaultTemplate;\n\n  constructor() {\n    if (this.isServer) {\n      return;\n    }\n\n    // If using `async-await`, `this` will be captured until the function is executed\n    // and completed, which can lead to a memory leak if the user navigates away from\n    // the playground component to another page.\n    forkJoin({\n      nodeRuntimeSandbox: injectNodeRuntimeSandbox(this.environmentInjector),\n      embeddedEditorComponent: import('../../editor/index').then((c) => c.EmbeddedEditor),\n    })\n      .pipe(\n        tap(({nodeRuntimeSandbox, embeddedEditorComponent}) => {\n          this.nodeRuntimeSandbox = nodeRuntimeSandbox;\n          this.embeddedEditorComponent = embeddedEditorComponent;\n        }),\n        switchMap(() => this.loadTemplate(this.defaultTemplate.path)),\n        takeUntilDestroyed(this.destroyRef),\n      )\n      .subscribe(() => {\n        this.changeDetectorRef.markForCheck();\n        this.nodeRuntimeSandbox!.init();\n      });\n  }\n\n  async newProject() {\n    await this.loadTemplate(this.starterTemplate.path);\n  }\n\n  async changeTemplate(template: PlaygroundTemplate): Promise<void> {\n    this.selectedTemplate = template;\n    await this.loadTemplate(template.path);\n    await this.nodeRuntimeSandbox!.reset();\n  }\n\n  private async loadTemplate(tutorialPath: string) {\n    const embeddedTutorialManager = await injectAsync(this.environmentInjector, () =>\n      import('../../editor/index').then((c) => c.EmbeddedTutorialManager),\n    );\n\n    await embeddedTutorialManager.fetchAndSetTutorialFiles(tutorialPath);\n  }\n}\n", "<div class=\"adev-playground-header\">\n  <header>\n    <h1 tabindex=\"-1\">Angular 演练场</h1>\n  </header>\n  <div class=\"adev-template-select\">\n    <label for=\"playgroundTemplate\">选择模板</label>\n    <button [cdkMenuTriggerFor]=\"templatesMenu\">\n      <span>{{ selectedTemplate.label }}</span>\n      <docs-icon>expand_more</docs-icon>\n    </button>\n  </div>\n</div>\n\n@if (embeddedEditorComponent) {\n<ng-container *ngComponentOutlet=\"embeddedEditorComponent\" />\n}\n\n<ng-template #templatesMenu>\n  <ul class=\"adev-template-dropdown\" cdkMenu>\n    @for (template of templates; track template.path) {\n    <li>\n      <button cdkMenuItem type=\"button\" (click)=\"changeTemplate(template)\">\n        <span>{{ template.label }}</span>\n      </button>\n    </li>\n    }\n  </ul>\n</ng-template>\n"],
  "mappings": "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",
  "names": []
}
